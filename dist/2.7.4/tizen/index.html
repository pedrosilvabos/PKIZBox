<!DOCTYPE html>
<html>
	<head>
		<title>ZombieBox</title>
		<meta charset="utf-8">
		<!-- styles -->
		

		<!-- inlineStyles -->
		<style>article,aside,blockquote,body,button,code,dd,details,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{padding:0;margin:0}table{border-collapse:collapse;border-spacing:0}fieldset,img,table{border:0}address,caption,cite,code,dfn,th,var{font-weight:400;font-style:normal}caption,th{text-align:left}tr{vertical-align:top}ol,ul{list-style:none}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:400}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:none}button,input,select,textarea{font-family:inherit;font-size:100%}textarea{overflow:auto;resize:vertical}button{width:auto;overflow:visible;cursor:pointer}button::-moz-focus-inner{padding:0;border:0}img{vertical-align:bottom}:focus,a:active{outline:0}body,html{height:100%}body{font-family:Arial,Helvetica,sans-serif;font-size:12px;line-height:1.25;overflow:hidden}.zb-clear:after,.zb-clear:before{content:'';display:table}.zb-clear:after{clear:both}.zb-valign,.zb-valign-helper{display:inline-block;vertical-align:middle}.zb-valign-helper{width:0;height:100%}.zb-center{width:100%;height:100%;display:table;position:absolute;top:0;left:0}.zb-center__cell{text-align:center;vertical-align:middle;display:table-cell}.zb-center__container{text-align:left;vertical-align:top;display:inline-block}.zb-fullscreen{width:100%;height:100%;position:absolute;top:0;left:0}.zb-body{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.zb-layer-container{background:#000;color:#fff;z-index:1}.zb-layer-container._transparent{background:0 0}.zb-system-container{color:#fff;z-index:2}.zb-plugin-container{width:0;height:0;visibility:hidden;overflow:hidden;position:absolute;top:100%;left:100%}.zb-qhd{width:960px;height:540px}.zb-hd{width:1280px;height:720px}.zb-full-hd{width:1920px;height:1080px}.zb-layer{z-index:1;overflow:hidden}.zb-layer__container{z-index:1}.zb-layer__children{z-index:2}.zb-layer__pointer-block{z-index:3}.zb-debug-screen{position:absolute;top:0;left:0;right:0;z-index:99999;padding:10px;background-color:rgba(0,0,0,.6)}.zb-debug-screen__item{color:green}.s-home h1{padding:30px;font-size:30px;background:#555}.s-home .row,.s-player .row{margin:20px auto;text-align:center;position:absolute;left:0;right:0}.s-home .row.history{bottom:0}.s-home .row.scenes{bottom:100px}.s-player .row.history{bottom:0}.s-player .row.scenes{bottom:100px}.w-button{width:300px;height:40px;border:3px solid #fff;-webkit-border-radius:7px;-moz-border-radius:7px;border-radius:7px;display:inline-block;font-size:30px;line-height:40px;margin:20px;background:rgba(0,0,0,.7)}.w-button._active{font-weight:700;border-color:#8b0000;background:rgba(58,11,18,.7)}.w-button,.w-greeting{text-align:center}.w-greeting h2{font-size:50px;margin-top:100px}.w-greeting p{font-size:20px;margin:30px}</style>

		<!-- modules -->
		

		<!-- scripts -->
		<script src="$WEBAPIS/webapis/webapis.js"></script>

		<!-- inlineScripts -->
		<script>var n;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function r(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function v(a){if(!(a instanceof Array)){a=r(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
var ba="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ca="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function da(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var w=da(this);function x(a,b){if(b)a:{var c=w;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ca(c,a,{configurable:!0,writable:!0,value:b})}}var ea;
if("function"==typeof Object.setPrototypeOf)ea=Object.setPrototypeOf;else{var fa;a:{var ha={qb:!0},ia={};try{ia.__proto__=ha;fa=ia.qb;break a}catch(a){}fa=!1}ea=fa?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ja=ea;
function y(a,b){a.prototype=ba(b.prototype);a.prototype.constructor=a;if(ja)ja(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Kb=b.prototype}function ka(){this.i=!1;this.a=null;this.h=void 0;this.b=1;this.g=0;this.c=null}function ma(a){if(a.i)throw new TypeError("Generator is already running");a.i=!0}ka.prototype.f=function(a){this.h=a};function na(a,b){a.c={tb:b,xb:!0};a.b=a.g}
ka.prototype.return=function(a){this.c={return:a};this.b=this.g};function oa(a,b,c){a.b=c;return{value:b}}function pa(a){this.b=new ka;this.a=a}function qa(a,b){ma(a.b);var c=a.b.a;if(c)return ra(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.b.return);a.b.return(b);return sa(a)}
function ra(a,b,c,d){try{var e=b.call(a.b.a,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.b.i=!1,e;var g=e.value}catch(h){return a.b.a=null,na(a.b,h),sa(a)}a.b.a=null;d.call(a.b,g);return sa(a)}function sa(a){for(;a.b.b;)try{var b=a.a(a.b);if(b)return a.b.i=!1,{value:b.value,done:!1}}catch(c){a.b.h=void 0,na(a.b,c)}a.b.i=!1;if(a.b.c){b=a.b.c;a.b.c=null;if(b.xb)throw b.tb;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function ta(a){this.next=function(b){ma(a.b);a.b.a?b=ra(a,a.b.a.next,b,a.b.f):(a.b.f(b),b=sa(a));return b};this.throw=function(b){ma(a.b);a.b.a?b=ra(a,a.b.a["throw"],b,a.b.f):(na(a.b,b),b=sa(a));return b};this.return=function(b){return qa(a,b)};this[Symbol.iterator]=function(){return this}}function ua(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function g(h){h.done?d(h.value):Promise.resolve(h.value).then(b,c).then(g,e)}g(a.next())})}
function va(a){return ua(new ta(new pa(a)))}x("Symbol",function(a){function b(e){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c("jscomp_symbol_"+(e||"")+"_"+d++,e)}function c(e,g){this.b=e;ca(this,"description",{configurable:!0,writable:!0,value:g})}if(a)return a;c.prototype.toString=function(){return this.b};var d=0;return b});
x("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=w[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&ca(d.prototype,a,{configurable:!0,writable:!0,value:function(){return wa(aa(this))}})}return a});function wa(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}
x("Promise",function(a){function b(h){this.a=0;this.c=void 0;this.b=[];this.h=!1;var f=this.i();try{h(f.resolve,f.reject)}catch(k){f.reject(k)}}function c(){this.b=null}function d(h){return h instanceof b?h:new b(function(f){f(h)})}if(a)return a;c.prototype.a=function(h){if(null==this.b){this.b=[];var f=this;this.c(function(){f.f()})}this.b.push(h)};var e=w.setTimeout;c.prototype.c=function(h){e(h,0)};c.prototype.f=function(){for(;this.b&&this.b.length;){var h=this.b;this.b=[];for(var f=0;f<h.length;++f){var k=
h[f];h[f]=null;try{k()}catch(l){this.i(l)}}}this.b=null};c.prototype.i=function(h){this.c(function(){throw h;})};b.prototype.i=function(){function h(l){return function(m){k||(k=!0,l.call(f,m))}}var f=this,k=!1;return{resolve:h(this.C),reject:h(this.f)}};b.prototype.C=function(h){if(h===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(h instanceof b)this.H(h);else{a:switch(typeof h){case "object":var f=null!=h;break a;case "function":f=!0;break a;default:f=!1}f?this.B(h):this.g(h)}};
b.prototype.B=function(h){var f=void 0;try{f=h.then}catch(k){this.f(k);return}"function"==typeof f?this.X(f,h):this.g(h)};b.prototype.f=function(h){this.j(2,h)};b.prototype.g=function(h){this.j(1,h)};b.prototype.j=function(h,f){if(0!=this.a)throw Error("Cannot settle("+h+", "+f+"): Promise already settled in state"+this.a);this.a=h;this.c=f;2===this.a&&this.F();this.m()};b.prototype.F=function(){var h=this;e(function(){if(h.l()){var f=w.console;"undefined"!==typeof f&&f.error(h.c)}},1)};b.prototype.l=
function(){if(this.h)return!1;var h=w.CustomEvent,f=w.Event,k=w.dispatchEvent;if("undefined"===typeof k)return!0;"function"===typeof h?h=new h("unhandledrejection",{cancelable:!0}):"function"===typeof f?h=new f("unhandledrejection",{cancelable:!0}):(h=w.document.createEvent("CustomEvent"),h.initCustomEvent("unhandledrejection",!1,!0,h));h.promise=this;h.reason=this.c;return k(h)};b.prototype.m=function(){if(null!=this.b){for(var h=0;h<this.b.length;++h)g.a(this.b[h]);this.b=null}};var g=new c;b.prototype.H=
function(h){var f=this.i();h.fa(f.resolve,f.reject)};b.prototype.X=function(h,f){var k=this.i();try{h.call(f,k.resolve,k.reject)}catch(l){k.reject(l)}};b.prototype.then=function(h,f){function k(p,t){return"function"==typeof p?function(u){try{l(p(u))}catch(z){m(z)}}:t}var l,m,q=new b(function(p,t){l=p;m=t});this.fa(k(h,l),k(f,m));return q};b.prototype.catch=function(h){return this.then(void 0,h)};b.prototype.fa=function(h,f){function k(){switch(l.a){case 1:h(l.c);break;case 2:f(l.c);break;default:throw Error("Unexpected state: "+
l.a);}}var l=this;null==this.b?g.a(k):this.b.push(k);this.h=!0};b.resolve=d;b.reject=function(h){return new b(function(f,k){k(h)})};b.race=function(h){return new b(function(f,k){for(var l=r(h),m=l.next();!m.done;m=l.next())d(m.value).fa(f,k)})};b.all=function(h){var f=r(h),k=f.next();return k.done?d([]):new b(function(l,m){function q(u){return function(z){p[u]=z;t--;0==t&&l(p)}}var p=[],t=0;do p.push(void 0),t++,d(k.value).fa(q(p.length-1),m),k=f.next();while(!k.done)})};return b});
function A(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var xa="function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)A(d,e)&&(a[e]=d[e])}return a};x("Object.assign",function(a){return a||xa});
function ya(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var g=c++;return{value:b(g,a[g]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e}x("Array.prototype.keys",function(a){return a?a:function(){return ya(this,function(b){return b})}});
x("WeakMap",function(a){function b(k){this.b=(f+=Math.random()+1).toString();if(k){k=r(k);for(var l;!(l=k.next()).done;)l=l.value,this.set(l[0],l[1])}}function c(){}function d(k){var l=typeof k;return"object"===l&&null!==k||"function"===l}function e(k){if(!A(k,h)){var l=new c;ca(k,h,{value:l})}}function g(k){var l=Object[k];l&&(Object[k]=function(m){if(m instanceof c)return m;Object.isExtensible(m)&&e(m);return l(m)})}if(function(){if(!a||!Object.seal)return!1;try{var k=Object.seal({}),l=Object.seal({}),
m=new a([[k,2],[l,3]]);if(2!=m.get(k)||3!=m.get(l))return!1;m.delete(k);m.set(l,4);return!m.has(k)&&4==m.get(l)}catch(q){return!1}}())return a;var h="$jscomp_hidden_"+Math.random();g("freeze");g("preventExtensions");g("seal");var f=0;b.prototype.set=function(k,l){if(!d(k))throw Error("Invalid WeakMap key");e(k);if(!A(k,h))throw Error("WeakMap key fail: "+k);k[h][this.b]=l;return this};b.prototype.get=function(k){return d(k)&&A(k,h)?k[h][this.b]:void 0};b.prototype.has=function(k){return d(k)&&A(k,
h)&&A(k[h],this.b)};b.prototype.delete=function(k){return d(k)&&A(k,h)&&A(k[h],this.b)?delete k[h][this.b]:!1};return b});
x("Map",function(a){function b(){var f={};return f.L=f.next=f.head=f}function c(f,k){var l=f.b;return wa(function(){if(l){for(;l.head!=f.b;)l=l.L;for(;l.next!=l.head;)return l=l.next,{done:!1,value:k(l)};l=null}return{done:!0,value:void 0}})}function d(f,k){var l=k&&typeof k;"object"==l||"function"==l?g.has(k)?l=g.get(k):(l=""+ ++h,g.set(k,l)):l="p_"+k;var m=f.a[l];if(m&&A(f.a,l))for(f=0;f<m.length;f++){var q=m[f];if(k!==k&&q.key!==q.key||k===q.key)return{id:l,list:m,index:f,D:q}}return{id:l,list:m,
index:-1,D:void 0}}function e(f){this.a={};this.b=b();this.size=0;if(f){f=r(f);for(var k;!(k=f.next()).done;)k=k.value,this.set(k[0],k[1])}}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var f=Object.seal({x:4}),k=new a(r([[f,"s"]]));if("s"!=k.get(f)||1!=k.size||k.get({x:4})||k.set({x:4},"t")!=k||2!=k.size)return!1;var l=k.entries(),m=l.next();if(m.done||m.value[0]!=f||"s"!=m.value[1])return!1;m=l.next();return m.done||4!=m.value[0].x||
"t"!=m.value[1]||!l.next().done?!1:!0}catch(q){return!1}}())return a;var g=new WeakMap;e.prototype.set=function(f,k){f=0===f?0:f;var l=d(this,f);l.list||(l.list=this.a[l.id]=[]);l.D?l.D.value=k:(l.D={next:this.b,L:this.b.L,head:this.b,key:f,value:k},l.list.push(l.D),this.b.L.next=l.D,this.b.L=l.D,this.size++);return this};e.prototype.delete=function(f){f=d(this,f);return f.D&&f.list?(f.list.splice(f.index,1),f.list.length||delete this.a[f.id],f.D.L.next=f.D.next,f.D.next.L=f.D.L,f.D.head=null,this.size--,
!0):!1};e.prototype.clear=function(){this.a={};this.b=this.b.L=b();this.size=0};e.prototype.has=function(f){return!!d(this,f).D};e.prototype.get=function(f){return(f=d(this,f).D)&&f.value};e.prototype.entries=function(){return c(this,function(f){return[f.key,f.value]})};e.prototype.keys=function(){return c(this,function(f){return f.key})};e.prototype.values=function(){return c(this,function(f){return f.value})};e.prototype.forEach=function(f,k){for(var l=this.entries(),m;!(m=l.next()).done;)m=m.value,
f.call(k,m[1],m[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var h=0;return e});function za(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var g=a[e];if(b.call(c,g,e,a))return{Da:e,Ja:g}}return{Da:-1,Ja:void 0}}x("Array.prototype.findIndex",function(a){return a?a:function(b,c){return za(this,b,c).Da}});
x("Promise.prototype.finally",function(a){return a?a:function(b){return this.then(function(c){return Promise.resolve(b()).then(function(){return c})},function(c){return Promise.resolve(b()).then(function(){throw c;})})}});x("Object.values",function(a){return a?a:function(b){var c=[],d;for(d in b)A(b,d)&&c.push(b[d]);return c}});x("Number.isNaN",function(a){return a?a:function(b){return"number"===typeof b&&isNaN(b)}});
x("Math.sign",function(a){return a?a:function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1}});x("Array.prototype.entries",function(a){return a?a:function(){return ya(this,function(b,c){return[b,c]})}});x("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}});
x("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var g=d[c];if(g===b||Object.is(g,b))return!0}return!1}});
x("String.prototype.includes",function(a){return a?a:function(b,c){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(b,c||0)}});x("Array.prototype.find",function(a){return a?a:function(b,c){return za(this,b,c).Ja}});
x("Array.from",function(a){return a?a:function(b,c,d){c=null!=c?c:function(f){return f};var e=[],g="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof g){b=g.call(b);for(var h=0;!(g=b.next()).done;)e.push(c.call(d,g.value,h++))}else for(g=b.length,h=0;h<g;h++)e.push(c.call(d,b[h],h));return e}});x("Array.prototype.values",function(a){return a?a:function(){return ya(this,function(b,c){return c})}});
x("Object.entries",function(a){return a?a:function(b){var c=[],d;for(d in b)A(b,d)&&c.push([d,b[d]]);return c}});window[Symbol("Object spread Object.assign polyfill hack")]=Object.assign({},{});function Aa(a,b,c){a=document.createElement(a);"undefined"!==typeof b&&null!==b&&(a.className=b);"undefined"!==typeof c&&a.appendChild(document.createTextNode(c));return a}function B(a){return Aa("div",a,void 0)}
function Ba(a){var b=void 0===b?"block":b;a.style.display="none"===a._oldDisplay?"":a._oldDisplay||"";var c;if(c=a.ownerDocument.defaultView.getComputedStyle(a,null)){var d=c.getPropertyValue("display");""!==d||c.hasOwnProperty("display")||(d=null);c=d}else c=null;"none"===c&&(a.style.display=b)}function Ca(a){a._oldDisplay=a.style.display;a.style.display="none"};function C(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];D&&Da&Ea&&D.va.apply(D,v(b))}function Fa(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];D&&Da&Ga&&D.wa.apply(D,v(b))}function Ha(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];D&&Da&Ia&&D.error.apply(D,v(b))}var D=null,Ea=2,Ga=8,Ia=16,Da=255;function Ja(a){this.b=a;Ka();Ka();window.addEventListener("popstate",this.a.bind(this))}function Ka(){window.history&&window.history.pushState&&window.history.pushState({},"ZombieBox history")}Ja.prototype.a=function(a){null!==a.state&&this.b();Ka()};function La(a){a=Error.call(this,'Unsupported feature "'+a+'"');this.message=a.message;"stack"in a&&(this.stack=a.stack)}y(La,Error);function Ma(a){this.value=a}function E(a){return Math.abs(F[a.value])-1}function G(a){a=F[a.value];return a/Math.abs(a)}Ma.prototype.toString=function(){return this.value};function Na(a){var b;Object.keys(F).forEach(function(c){F[c]===a&&(b=c)});return new Ma(b)}function H(a){return new Ma(a)}var F={left:-1,right:1,up:-2,down:2};function Oa(a,b){this.x=a;this.y=b}function Qa(a,b,c){0===b?a.x=c:1===b&&(a.y=c)}function I(a,b){return 0===b?a.x:1===b?a.y:NaN}Oa.prototype.add=function(a){return J({x:this.x+a.x,y:this.y+a.y})};Oa.prototype.sub=function(a){return J({x:this.x-a.x,y:this.y-a.y})};Oa.prototype.toString=function(){return this.x+":"+this.y};function J(a){return new Oa(a.x,a.y)};function Ra(a){this.s=a.s;this.o=a.o;this.u=a.u;this.v=a.v}Ra.prototype.ia=function(){return!(this.u>this.o&&this.v>this.s)};function Sa(a){return{o:a.o,s:a.s,u:a.u,v:a.v}}function K(a,b){if(0===E(b)){if(0<G(b))return a.u;if(0>G(b))return a.o}else if(1===E(b)){if(0<G(b))return a.v;if(0>G(b))return a.s}Fa("Unknown direction: "+b);return NaN}function Ta(a,b,c){0===E(b)?0<G(b)?a.u=c:0>G(b)&&(a.o=c):1===E(b)&&(0<G(b)?a.v=c:0>G(b)&&(a.s=c))}function Ua(a){return J({x:(a.o+a.u)/2,y:(a.s+a.v)/2})}
function Va(a){return J({x:a.u-a.o,y:a.v-a.s})}function Wa(a,b,c){var d=K(a,b);Ta(a,b,0<G(b)?Math.min(c,d):Math.max(c,d))}function Xa(a,b){a.o+=b;a.u+=b}function Ya(a,b){a.s+=b;a.v+=b}function Za(a,b){return a.o<b.u&&a.u>b.o&&a.s<b.v&&a.v>b.s}
Ra.prototype.sub=function(a){var b=this;if(!Za(b,a))return[L(Sa(b))];var c=[];[H("left"),H("right")].forEach(function(d){var e=L(Sa(b));Wa(e,Na(-1*F[d.value]),K(a,d));[H("up"),H("down")].forEach(function(g){Wa(e,g,K(a,g))});c.push(e)});[H("up"),H("down")].forEach(function(d){var e=L(Sa(b));Wa(e,Na(-1*F[d.value]),K(a,d));c.push(e)});return c=c.filter(function(d){return!d.ia()})};Ra.prototype.toString=function(){return J({x:this.o,y:this.s})+" - "+J({x:this.u,y:this.v})};
function $a(a,b,c,d){return new Ra({o:a,s:b,u:c,v:d})}function L(a){return new Ra(a)};function ab(a){this.i=a;this.b=null;this.a=new Map}ab.prototype.f=function(a,b){if(!this.b.f)switch(b.type){case "mouseover":a.B||a.b("want-focus",a);break;case "click":a.G(21,b)&&b.stopPropagation()}};ab.prototype.c=function(a){if(this.b.f)a.preventDefault();else{var b=this.b.ra(a);if(this.i.G(b,a))return a.preventDefault(),!1}return!0};function M(){this.i={};this.X=[]}function N(a,b,c){a.i[b]||(a.i[b]=[]);a.i[b].push(c)}M.prototype.once=function(a,b){function c(g){for(var h=[],f=0;f<arguments.length;++f)h[f]=arguments[f];e.za||(e.za=!0,O(d,a,c),b.apply(null,v(h)))}var d=this,e={sb:b,za:!1,Ka:c};this.X.push(e);N(this,a,c)};
function O(a,b,c){if(a.i[b]){var d=a.i[b].indexOf(c);if(-1===d){var e=a.X.findIndex(function(g){return g.sb===c});-1!==e&&(d=a.X[e].Ka,a.X.splice(e,1),d=a.i[b].indexOf(d))}-1!==d&&(1===a.i[b].length?a.i[b]=[]:a.i[b].splice(d,1))}}
M.prototype.b=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];if("any"!==a&&(d=[],this.i[a]&&this.i[a].length&&(d=d.concat(this.i[a])),this.i.any&&this.i.any.length&&(d=d.concat(this.i.any)),d.length)){for(var e=0,g=d.length;e<g;e++){var h=d[e];switch(c.length){case 0:h.call(null,a);break;case 1:h.call(null,a,c[0]);break;case 2:h.call(null,a,c[0],c[1]);break;case 3:h.call(null,a,c[0],c[1],c[2]);break;case 4:h.call(null,a,c[0],c[1],c[2],c[3]);break;case 5:h.call(null,a,c[0],
c[1],c[2],c[3],c[4]);break;default:h.apply(null,v([a].concat(c)))}}c=r([]);for(d=c.next();!d.done;d=c.next())d=d.value,d()}};function bb(){M.call(this);this.c=!1;this.a=[]}y(bb,M);bb.prototype.block=function(a){var b=this;if(-1!==this.a.indexOf(a))return a;this.a.push(a);cb(this,!0);a.finally(function(){var c=b.a.indexOf(a);-1<c&&b.a.splice(c,1);b.a.length||cb(b,!1)});return a};function cb(a,b){a.c!==b&&((a.c=b)?a.b("block"):a.b("unblock"))};function db(a){this.value=a}db.prototype.ia=function(){return this.value.every(function(a){return a.ia()})};function eb(a){a=a.value;if(!a.length)return L({o:0,s:0,u:0,v:0});a=a.reduce(function(b,c){return{o:Math.min(b.o,c.o),s:Math.min(b.s,c.s),u:Math.max(b.u,c.u),v:Math.max(b.v,c.v)}});return L(a)};function fb(){this.m=[];this.b=[]};function P(a,b){a=void 0===a?!1:a;b=void 0===b?!1:b;fb.call(this);this.f=this.i=!1;this.l=$a(0,0,0,0);this.i=void 0===a?!1:a;this.f=void 0===b?!1:b}y(P,fb);P.prototype.c=function(a,b){var c=this.l;a&&(c=gb(a)||c);var d=hb(c,this.b,b);!d.length&&ib(this,b)&&(d=this.a(c,b,this.b));return d.filter(function(e){return e!==a&&e.K()})};
P.prototype.a=function(a,b,c){var d=c.reduce(function(h,f){return h.concat(jb(f))},[]);d=eb(new db(d));var e=b.value,g=-G(b);a=L(Sa(a));"left"===e||"right"===e?Xa(a,g*I(Va(d),0)):("up"===e||"down"===e)&&Ya(a,g*I(Va(d),0));return hb(a,c,b)};
function hb(a,b,c){function d(f){a:{var k=c?c.value:void 0,l=k?H(k):null;if(f.ia())f=null;else{if(l&&(k=K(a,l),0>(K(f,Na(-1*F[l.value]))-k)*G(l))){f=null;break a}k=Ua(a);var m=Ua(f);if(l){var q=E(l),p=0===q?1:0;Qa(k,q,K(a,l));Qa(m,q,K(f,Na(-1*F[l.value])));l=J({x:f.o,y:f.s});f=J({x:f.u,y:f.v});Qa(m,p,I(l,p)<=I(k,p)&&I(f,p)>=I(k,p)?I(k,p):I(f,p)<I(k,p)?I(f,p):I(l,p))}f={fromPoint:k,Bb:m}}}if(k=f)f=k.fromPoint,k=k.Bb,g=Math.min(g,Math.sqrt(Math.pow(Math.abs(f.x-k.x),2)+Math.pow(Math.abs(f.y-k.y),2)))}
for(var e=[],g,h=0;h<b.length;h++)g=Infinity,jb(b[h]).forEach(d),isFinite(g)&&e.push([h,g]);e.sort(function(f,k){return f[1]-k[1]});return e.map(function(f){return b[f[0]]})}function ib(a,b){return(b=0===E(b))&&a.i||!b&&a.f};function kb(a,b,c){a=void 0===a?{}:a;b=void 0===b?{}:b;c=void 0===c?!0:c;a=Object.assign({},lb,a);var d=Object.assign({},lb,b);P.call(this,a.Aa,d.Aa);b=a.enabled;a=d.enabled;this.h=void 0===b?!1:b;this.j=void 0===a?!1:a;this.g=void 0===c?!0:c}y(kb,P);
kb.prototype.c=function(a,b){var c=this.l;a&&(c=gb(a)||c);var d=0===E(b),e=!d&&this.j,g=[];if(d&&this.h||e)g=this.b.filter(function(h){return h!==a&&h.K()}),d=mb(c,d,g),g=hb(c,d,b),!g.length&&ib(this,b)&&(g=this.a(c,b,d));!g.length&&this.g&&(g=P.prototype.c.call(this,a,b));return g};kb.prototype.a=function(a,b,c){if(this.g&&!this.h&&!this.j)return P.prototype.a.call(this,a,b,c);var d=[],e=0===E(b),g=!e&&this.f;if(e&&this.i||g)b=Na(-1*F[b.value]),d=hb(a,c,b).reverse();return d};
function mb(a,b,c){return c.filter(function(d){d=jb(d);var e=Sa(a),g=e.o,h=e.u,f=e.s;e=e.v;var k=b?L({o:-Infinity,s:f,u:Infinity,v:e}):L({o:g,s:-Infinity,u:h,v:Infinity});return d.some(function(l){return Za(k,l)})})}var lb={enabled:!1,Aa:!1};function Q(){M.call(this);this.a=[];this.j={};this.H=new kb({enabled:!0},{enabled:!0});this.l=this.c=null;this.B=!1;this.la="inner-focus";this.na=this.na.bind(this);this.ma=this.ma.bind(this)}y(Q,M);n=Q.prototype;n.G=function(a,b){var c;if(c=void 0===b||b instanceof KeyboardEvent||b instanceof WheelEvent)a:{if(0<this.a.length&&(c=this.c)&&c.isVisible()){c=c.G(a,b);break a}c=!1}return c?!0:nb(this,a)};n.U=function(){return ob(this)};
n.S=function(a){this.B=!0;if(0<this.a.length){var b=this.c;b&&!b.K()&&(b=null);!b&&this.l&&this.l.K()&&(b=this.l);!b&&a&&this.H instanceof P&&(b=hb(a instanceof Oa?$a(a.x,a.y,a.x+1,a.y+1):a,this.H.b,void 0).filter(function(c){return c.K()})[0]||null);pb(this,b||qb(this),a)}};n.M=function(){this.B=!1;this.c&&this.c.M()};function qb(a){if(0<a.a.length)for(var b=0;b<a.a.length;b++)if(a.a[b].K())return a.a[b];return null}function rb(a){return a.a.filter(function(b){return b.K()})}
function sb(a,b,c){a.a.push(b);var d=a.H;d.b.push(b);d.m.push({});c&&(a.j[c]=b);N(b,b.m,a.na);N(b,b.la,a.ma);if(a=b.ga())c=R.B,c.a.has(a)||(b=c.f.bind(c,b),a.addEventListener("mouseover",b,!1),a.addEventListener("click",b,!1),c.a.set(a,b))}function tb(a,b){for(var c in a.j)if(a.j.hasOwnProperty(c)&&a.j[c]===b)return c;return""}
function pb(a,b,c){var d=a.B;if(b){if(-1===a.a.indexOf(b))throw Error("Foreign widget!");if(!b.K())return!1}var e=a.c;e=e?gb(e):null;var g=null;b===a.c?d&&b&&!b.B&&(g=a.c):(a.c&&a.c.M(),g=b,a.c=g);g&&d&&(a.b("inner-focus",[a],g),g.S(c||e));return!0}
function ob(a){for(var b={},c=a.j,d=r(Object.keys(c)),e=d.next();!e.done;e=d.next())e=e.value,b[e]=c[e].U();var g=tb(a,a.c);return function(){var h=Object.keys(a.j);Object.keys(b).filter(function(k){return-1!==h.indexOf(k)}).map(function(k){return b[k]()});var f=a.j[g]||null;f&&pb(a,f)}}
function ub(a,b){var c=a.H,d=a.c,e;if(e=d){e=c.m;var g=c.b.indexOf(d);if(-1===g)throw Error("Unknown widget");e=e[g]}b=e&&e.hasOwnProperty(b)?(b=e[b])&&[b]:c.c(d,new Ma(b));if(!b)return!0;for(c=!1;!c&&b.length;)c=b.shift(),c=pb(a,c);return c}function nb(a,b){switch(b){case 1:return ub(a,"left");case 2:return ub(a,"up");case 3:return ub(a,"right");case 4:return ub(a,"down")}return!1}n.na=function(a,b){pb(this,b)};n.ma=function(a,b,c){this.b(a,[this].concat(b),c)};function vb(){Q.call(this);this.C=this.g=this.Z=this.f=null;this.$=!1;this.Y=[];this.F=new bb;N(this.F,"block",this.cb.bind(this));N(this.F,"unblock",this.pb.bind(this));this.f=B("zb-layer zb-fullscreen");this.g=B("zb-layer__container zb-fullscreen");this.Z=B("zb-layer__children zb-fullscreen");this.C=B("zb-layer__pointer-block zb-fullscreen");this.f.appendChild(this.g);this.f.appendChild(this.Z);this.f.appendChild(this.C);Ca(this.Z);Ca(this.C)}y(vb,Q);n=vb.prototype;
n.S=function(){C("Layer.focus: "+wb(this),this.f.style.display||"block");Q.prototype.S.call(this)};n.M=function(){C("Layer.blur: "+wb(this),this.f.style.display||"block");Q.prototype.M.call(this)};n.G=function(a,b){if(this.F.c)return!1;var c=this.Y[this.Y.length-1]||null;return c?c.G(a,b):Q.prototype.G.call(this,a,b)};n.toString=function(){return wb(this)};n.wait=function(a){return this.F.block(a)};function wb(a){return a.g?a.g.className:"none"}n.ga=function(){return this.g};
n.ba=function(){C("Layer.beforeDOMShow: "+wb(this));!this.c&&this.l&&pb(this,this.l);this.a.forEach(function(a){a.isVisible()&&xb(a)})};function yb(a){C("Layer.beforeDOMHide: "+wb(a));a.a.forEach(function(b){b.isVisible()&&zb(b)})}function Ab(a){C("Layer.afterDOMShow: "+wb(a));a.$=!0;a.a.forEach(function(b){Bb(b,!0);b.isVisible()&&Cb(b)})}n.aa=function(){C("Layer.afterDOMHide: "+wb(this));this.$=!1;this.a.forEach(function(a){Bb(a,!1);a.isVisible()&&Db(a)})};n.isVisible=function(){return this.$};
n.cb=function(){Ba(this.C)};n.pb=function(){Ca(this.C)};function Eb(a){M.call(this);this.c={};this.g=a;this.a=null}y(Eb,M);Eb.prototype.U=function(){return function(a){return this.open(a)}.bind(this,this.a)};Eb.prototype.register=function(a,b){C('LayerManager::register: registering layer "'+b+'"');var c=a.f;this.c[b]=a;this.g.appendChild(c);c.style.display="none"};function Fb(a,b){for(var c in a.c)if(a.c.hasOwnProperty(c)&&a.c[c]===b)return c;return null}
Eb.prototype.open=function(a){var b=this;C('zb.Application::show: showing layer "'+a+'"');var c=this.a,d={yb:a,ub:c},e=Promise.resolve().then(function(){b.b("transition-start",d);return Gb(b,c)}).then(function(){return Hb(b,a)}).then(function(){C("LayerManager::_transit: success");b.a=a;b.b("transition-success",d)}).then(null,function(g){g instanceof Error||(g=Error(g));var h=g,f=["LayerManager::_transit: failed"],k=d.ub,l=d.yb;k&&f.push('from "'+(Fb(b,k)||"unknown")+'"');f.push('to "'+(Fb(b,l)||
"unknown")+'"');f.push("("+h.message+",");f.push((h.stack||h.stacktrace||"")+")");Ha(f.join(" "));b.b("transition-fail",d,h);Promise.reject(h);throw g;});c&&c.wait(e);return e};Eb.prototype.f=function(){Gb(this,this.a);this.a=null};function Gb(a,b){C('LayerManager::_transit: from "'+b);if(!b)return Promise.resolve();a.b("before-hide",b);b.M();yb(b);b.f.style.display="none";b.aa();a.b("after-hide",b);return Promise.resolve()}
function Hb(a,b){C('LayerManager::_transit: to "'+b+'"');return b?Promise.resolve().then(function(){a.b("before-show",b);return b.ba()}).then(function(){b.f.style.display="";Ab(b);b.S();a.b("after-show",b)}):Promise.resolve()};function Ib(){}Ib.prototype.U=function(){var a=this.b.a,b=a?a.U():function(){},c=this.b.U(),d=this.b.f.bind(this.b);return function(){return Promise.resolve().then(d).then(b).then(c)}};Ib.prototype.open=function(a,b){var c=this;Jb(this.a,[this]);return Promise.resolve().then(function(){return c.b.f()}).then(function(){pb(a,null);return b?b():null}).then(function(){return c.b.open(a)})};function Kb(){var a=window.console||null;a&&(this.info=a.info.bind(a),this.log=a.log.bind(a),this.va=a.debug.bind(a),this.error=a.error.bind(a),this.wa=a.warn.bind(a),this.time=a.time.bind(a))}n=Kb.prototype;n.info=function(){};n.log=function(){};n.va=function(){};n.error=function(){};n.wa=function(){};n.time=function(){};var Lb={Db:2,Cb:3,Eb:4,Fb:5},Mb={},Nb=(Mb[2]={name:"hd",width:1280,height:720},Mb[3]={name:"full-hd",width:1920,height:1080},Mb[4]={name:"4k",width:3840,height:2160},Mb[5]={name:"4k",width:7680,height:4320},Mb);function Ob(a){var b=Va(a);return Object.values(Lb).filter(function(c){c=Nb[c];return c.width<=b.x&&c.height<=b.y}).sort(function(c,d){c=Nb[c];d=Nb[d];return c.width===d.width?d.height-c.height:d.width-c.width}).shift()||null}
function Pb(a,b,c){var d=void 0===d?Math.round:d;var e=c.width/b.width;b=c.height/b.height;return new Ra({o:d(a.o*e),s:d(a.s*b),u:d(a.u*e),v:d(a.v*b)})};var Qb={};function Rb(a,b,c){b=void 0===b?NaN:b;c=void 0===c?NaN:c;this.b=a;this.a=b;this.c=c;a=this.toString();Qb.hasOwnProperty(a)||(Qb[a]=this);return Qb[a]}Rb.prototype.toString=function(){return this.b+"|"+this.a+":"+this.c};
w.Object.defineProperties(Rb.prototype,{x:{configurable:!0,enumerable:!0,get:function(){return this.a},set:function(){throw Error("Cannot set property x of #<Proportion> which has only a getter");}},y:{configurable:!0,enumerable:!0,get:function(){return this.c},set:function(){throw Error("Cannot set property y of #<Proportion> which has only a getter");}},name:{configurable:!0,enumerable:!0,get:function(){return this.b},set:function(){throw Error("Cannot set property name of #<Proportion> which has only a getter");
}}});new Rb("KEEP");new Rb("AUTO");new Rb("4:3",4,3);new Rb("16:9",16,9);var S={},Sb=(S.idle=["loading","error","destroyed","invalid"],S.loading=["idle","ready","error","destroyed"],S.ready=["idle","playing","error","destroyed"],S.playing="idle paused seeking waiting ended error destroyed".split(" "),S.paused=["idle","playing","seeking","error","destroyed"],S.waiting=["idle","playing","ended","error","destroyed"],S.seeking="idle playing paused waiting ended error destroyed".split(" "),S.ended=["idle","seeking","error","destroyed"],S.error="idle loading playing paused waiting seeking ended destroyed".split(" "),
S.invalid=["destroyed"],S.destroyed=[],S);function Tb(){this.a=[];this.b=-1}function Jb(a,b){var c=a.a[a.b]||null;c&&Ub(c);a.b++;a.a=a.a.slice(0,a.b);a.a.push({zb:b,state:[]})}function Vb(a,b){var c=a.a[a.b+b];return 0!==b&&c?Promise.resolve().then(function(){var d=a.a[a.b]||null;d&&Ub(d);return Wb(c)}).then(function(){a.b+=b}):Promise.resolve()}function Ub(a){a.state=a.zb.map(function(b){return b.U()})}function Wb(a){return a.state.filter(Boolean).reduce(function(b,c){return b.then(c)},Promise.resolve())}
w.Object.defineProperties(Tb.prototype,{length:{configurable:!0,enumerable:!0,get:function(){return this.a.length}}});function Xb(){vb.call(this);this.g.classList.add("_scene")}y(Xb,vb);function Yb(){M.call(this);var a=this;this.j=this.B=this.g=this.c=this.f=this.h=this.F=this.m=this.a=null;this.C=!1;window.hasOwnProperty("console")&&!D&&(D=new Kb);N(this,"dom-ready",function(){var b;Zb&&(b=Zb());if(!b)throw Error("Can't detect a platform.");N(b,b.f,a.b.bind(a,"device-ready",b));b.info=new $b(b.c);b.a=new ac;b.g=new bc;window.addEventListener("appcontrol",b.j.bind(b));cc(b.info).then(b.b.bind(b,"ready"))});N(this,"device-ready",function(b,c){new Ja(a.G.bind(a,20));a.a=c;a.f.classList.add(a.a.info.type());
var d=(b=Nb[Ob($a(0,0,window.screen.width,window.screen.height))||2])?"zb-"+b.name:"zb-unknown-resolution",e=Aa("meta");e.name="viewport";e.content="width="+b.width;document.head.appendChild(e);a.f.classList.add(d);a.B=new ab(a);a.B.b=a.a.a;b=a.B;b.b.h=b.c.bind(b);a.j=new vb;N(a.j,"child-layer-shown",a.ob.bind(a));N(a.j,"child-layer-hidden",a.nb.bind(a));a.h.appendChild(a.j.f);a.c=new Eb(a.m);a.g=new Tb;a.l=new Ib;a.l.b=a.c;a.l.a=a.g;a.b("ready");a.b("start",dc(c))});N(this,"ready",function(){return a.Fa()});
N(this,"start",function(){return a.Ga()});window.addEventListener("load",this.eb.bind(this),!1)}y(Yb,M);n=Yb.prototype;n.G=function(a,b){var c=!1,d=this.C?this.j:this.c.a;d&&(c=d.G(a,b));if(!c){c=!1;switch(a){case 20:ec(this),b&&b.preventDefault(),c=!0}c||Fa("Unhandled zbKey "+a+" ("+(b?"keyCode "+b.keyCode:"no keyboard event")+")")}return c};function ec(a){if(0<a.g.b){var b=a.a.a.block();b=a.a.a.Ia.bind(a.a.a,b);Vb(a.g,-1).finally(b)}else a.a.h(),Promise.resolve(null)}
function fc(){var a=R,b=a.g;b.b<b.a.length-1?(b=a.a.a.block(),b=a.a.a.Ia.bind(a.a.a,b),Vb(a.g,1).finally(b)):Promise.resolve(null)}n.Fa=function(){};n.Ga=function(){};n.ob=function(){Ba(this.h);if(!this.C){var a=this.c.a;a&&a.M()}this.C=!0};n.nb=function(){if(0===this.j.Y.length){var a=this.c.a;a&&a.S();Ca(this.h);this.C=!1}};
n.eb=function(){this.f=B("zb-body");document.body.appendChild(this.f);this.m=B("zb-layer-container zb-fullscreen");this.h=B("zb-system-container zb-fullscreen");this.F=B("zb-plugin-container");this.f.appendChild(this.m);this.f.appendChild(this.h);this.f.appendChild(this.F);Ca(this.h);this.b("dom-ready")};function gc(){M.call(this);this.g=this.a=this.info=null;this.f="ready"}y(gc,M);function bc(){};function hc(){}hc.prototype.locale=function(){var a=(this.a.LOCALE||{}).language.replace("_","-").split(".")[0]||"";return ic.test(a)?a:null};var ic=/^(?:(en-GB-oed|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang))$|^((?:[a-z]{2,3}(?:(?:-[a-z]{3}){1,3})?)|[a-z]{4}|[a-z]{5,8})(?:-([a-z]{4}))?(?:-([a-z]{2}|\d{3}))?((?:-(?:[\da-z]{5,8}|\d[\da-z]{3}))*)?((?:-[\da-wy-z](?:-[\da-z]{2,8})+)*)?(-x(?:-[\da-z]{1,8})+)?$|^(x(?:-[\da-z]{1,8})+)$/i;function $b(a){this.b=a.systeminfo;this.a={}}y($b,hc);$b.prototype.type=function(){return"tizen"};$b.prototype.model=function(){return this.b.getCapability("http://tizen.org/system/model_name")};$b.prototype.version=function(){return this.b.getCapability("http://tizen.org/feature/platform.version")};
function cc(a){var b=["WIFI_NETWORK","ETHERNET_NETWORK","LOCALE"].map(function(c){return jc(a,c).then(function(d){return[c,d]})});return Promise.all(b).then(function(c){return c.forEach(function(d){a.a[d[0]]=d[1]})})}function jc(a,b){return new Promise(function(c){try{a.b.getPropertyValue(b,c,function(){return c(void 0)})}catch(d){c(void 0)}})};function kc(a,b){var c=this;this.b=NaN;this.c=!1;this.a=a;this.i=b;this.f=function(){c.c=!0;c.a&&c.a()}}kc.prototype.start=function(){Number.isNaN(this.b)&&(this.c=!1,this.b=setTimeout(this.f,this.i))};function lc(a){clearTimeout(a.b);a.b=NaN};function mc(){M.call(this);this.f=!1;this.c=[];this.j=0;var a={};a[nc]=1;a[oc]=3;a[pc]=2;a[qc]=4;a[rc]=5;a[sc]=6;a[tc]=7;a[uc]=8;a[vc]=9;a[wc]=10;a[xc]=11;a[yc]=12;a[zc]=13;a[Ac]=14;a[Bc]=15;a[Cc]=16;a[Dc]=39;a[Ec]=17;a[Fc]=18;a[Gc]=19;a[Hc]=20;a[Ic]=21;a[Jc]=22;a[Kc]=23;a[Lc]=24;a[Mc]=25;a[Nc]=28;a[Oc]=29;a[Pc]=30;a[Qc]=31;a[Rc]=33;a[Sc]=32;a[Tc]=34;a[Uc]=37;this.l=a;this.h=null;this.m=this.g=!1;this.a=null;this.B=15E3;this.oa=this.oa.bind(this);this.ea=this.ea.bind(this);Vc(this);Wc(this);Xc(this);
!isNaN(void 0)&&isFinite(void 0)&&(this.B=void 0);this.a&&lc(this.a);this.a=null;this.a=new kc(this.ea,this.B)}y(mc,M);n=mc.prototype;n.block=function(){this.c.push(++this.j);this.f=!0;return this.j};n.Ia=function(a){a=this.c.indexOf(a);-1!==a&&this.c.splice(a,1);0===this.c.length&&(this.f=!1)};n.ra=function(a){"wheel"===a.type||"mousewheel"===a.type?a=Yc(a):(a=a.keyCode,a=this.l.hasOwnProperty(String(a))?this.l[a]:0);return a};
function Vc(a){try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){a.g=!0}}))}catch(b){}}function Wc(a){["keydown","mousewheel","wheel"].forEach(function(b){document.addEventListener(b,function(c){for(var d=[],e=0;e<arguments.length;++e)d[e]=arguments[e];a.h&&a.h.apply(a,v(d))},a.g&&{passive:!1})})}
function Yc(a){function b(g){return"delta"+g in a?a["delta"+g]:"wheelDelta"+g in a?-a["wheelDelta"+g]:0}var c=b("X"),d=b("Y");if(c&&d)return 0;c||d||"wheelDelta"in a&&(d=-a.wheelDelta);var e=Math.sign(c||d);return e?c?0<e?45:44:d?0<e?43:42:0:0}n.oa=function(){Zc(this,!0)};n.ea=function(){Zc(this,!1)};function Zc(a,b){if(a.a)if(b){var c=a.a;lc(c);c.start()}else lc(a.a);a.m!==b&&(a.m=b,a.b(b?"pointing-device-activated":"pointing-device-deactivated"))}
function Xc(a){function b(g,h){e.addEventListener(g,h,a.g?{passive:!0,capture:!1}:!1)}var c=a.oa.bind(a),d=a.ea.bind(a),e=document.body;"mouseenter mousemove mouseup mousedown mousewheel wheel".split(" ").forEach(function(g){return b(g,c)});b("mouseleave",d);b("mouseover",function(g){!g||g.fromElement||g.relatedTarget||c()});b("mouseout",function(g){!g||g.toElement||g.relatedTarget||d()})};function ac(){mc.call(this);for(var a=[$c,ad,bd,cd,dd,ed,fd,gd,hd,id,jd,kd,ld,md,nd,od,pd,qd,rd,sd,td,ud,vd,wd,xd,yd],b=0;b<a.length;b++){var c=window.tizen;try{c.tvinputdevice.registerKey(a[b])}catch(d){Ha(d)}}}y(ac,mc);ac.prototype.ra=function(a){var b=mc.prototype.ra.call(this,a);C("eventToKeyCode",a.keyCode,b);return b};
var nc=37,pc=38,oc=39,qc=40,Ic=13,Hc=10009,sc=49,tc=50,uc=51,vc=52,wc=53,xc=54,yc=55,zc=56,Ac=57,rc=48,Bc=415,Cc=19,Dc=10252,Ec=413,Gc=412,Fc=417,Pc=403,Qc=404,Rc=405,Sc=406,Mc=428,Lc=427,Nc=448,Uc=449,Oc=447,Tc=10182,Kc=457,Jc=457,ad="1",bd="2",cd="3",dd="4",ed="5",fd="6",gd="7",hd="8",id="9",$c="0",rd="MediaPlay",qd="MediaPause",sd="MediaPlayPause",td="MediaStop",vd="MediaRewind",ud="MediaFastForward",wd="MediaTrackNext",xd="MediaTrackPrevious",yd="MediaRecord",md="ColorF0Red",nd="ColorF1Green",
od="ColorF2Yellow",pd="ColorF3Blue",jd="ChannelDown",kd="ChannelUp",ld="PreviousChannel";function zd(a,b){this.c=a;this.a=b;a=this.c;this.f=Pb(new Ra({o:0,s:0,u:a.width,v:a.height}),this.c,this.a)};function Ad(a,b){a:{a=r(a.split("-"));var c=a.next().value;a=a.next().value;b=r(b.split("-"));var d=b.next().value;b=b.next().value;c=c.split(".");d=d.split(".");for(var e=0;e<Math.max(c.length,d.length);e++){var g=parseInt(c[e],10)||0,h=parseInt(d[e],10)||0;if(g!==h){a=g-h;break a}}a=(a||"").localeCompare(b||"","en")}return 0<=a};function Bd(a,b,c,d,e){zd.call(this,c,d);this.b=a;this.i=b;Ad(e,"5.0.0")||Ad(e,"4.0.0")}y(Bd,zd);function Cd(a){var b=a.f,c=I(Va(b),0),d=I(Va(b),1),e=a.i.style;e.top=b.s+"px";e.left=b.o+"px";e.width=c+"px";e.height=d+"px";-1!==["IDLE","PAUSED","PLAYING","READY"].indexOf(a.b.getState())&&(a.b.setDisplayMethod("PLAYER_DISPLAY_MODE_FULL_SCREEN"),b=Pb(b,a.a,Nb[3]),c=Va(b),a.b.setDisplayRect(b.o,b.s,c.x,c.y))};function Dd(a,b){M.call(this);this.f=a;this.a=b;this.c=null}y(Dd,M);function T(a,b){if(a.a&&!(a.f[a.a]||[]).includes(b))throw new Ed(a.a,b);if(a.c&&a.c.V!==b)throw new Fd(a.c.from,a.c.V,b);if(a.c){var c=a.c.from;a.c=null}else c=a.a,a.b("state-exit",c,b);a.a=b;a.b("state-enter",a.a,c)}function Gd(a,b){if(a.c)throw new Fd(a.c.from,a.c.V,b);if(a.a&&!(a.f[a.a]||[]).includes(b))throw new Ed(a.a,b);a.c={from:a.a,V:b};a.a=null;a.b("state-exit",a.c.from,b)}
function Hd(a){return!!a.c&&"destroyed"===a.c.V}function Id(a){a.c&&(a.a=a.c.from,a.c=null)}function Ed(a,b){var c=Error.call(this,'Invalid transition from "'+a+'" to "'+b+'"');this.message=c.message;"stack"in c&&(this.stack=c.stack);this.from=a;this.V=b}y(Ed,Error);function Fd(a,b,c){c=Error.call(this,'There is a pending transition from "'+a+'" to "'+b+'", cannot transition to "'+c+'"');this.message=c.message;"stack"in c&&(this.stack=c.stack);this.from=a;this.V=b}y(Fd,Error);function Jd(a,b){M.call(this);var c=this;this.la=a;this.da=b;this.a=new Dd(Sb,"idle");this.Ta="idle";this.Xa="loading";this.F="ready";this.Za="playing";this.Ya="paused";this.ab="waiting";this.$a="seeking";this.Sa="ended";this.Wa="invalid";this.Ra="destroyed";N(this.a,"state-exit",function(d,e,g){return c.b("state-exit",e,g)});N(this.a,"state-enter",function(d,e,g){c.b("state-enter",e,g);d={};d=(d.idle=c.Ta,d.loading=c.Xa,d.ready=c.F,d.playing=c.Za,d.paused=c.Ya,d.waiting=c.ab,d.seeking=c.$a,d.ended=
c.Sa,d.invalid=c.Wa,d.destroyed=c.Ra,d);d.hasOwnProperty(e)&&c.b(d[e])});Kd(this)}y(Jd,M);Jd.prototype.ya=function(){throw new La("DRM protection");};Jd.prototype.Ba=function(){throw new La("DRM protection");};
function Kd(a){function b(e,g,h){var f,k=g.includes("error")?g:g.concat(["error"]);for(g={P:a};g.P&&!(f=Object.getOwnPropertyNames(g.P).find(function(l){return function(m){return l.P[m]===e}}(g)));g={P:g.P},g.P=Object.getPrototypeOf(g.P));a[f]=function(l){for(var m=[],q=0;q<arguments.length;++q)m[q]=arguments[q];q=Array.isArray(k)?k:[k];var p=a.a.a;if(!q.includes(p))throw new Ld(p,q,h);return e.apply(a,m)}}var c="loading ready playing paused waiting seeking ended".split(" "),d="ready playing paused waiting seeking ended".split(" ");
b(a.prepare,["idle"],"prepare() can only be called while Video is not initialized with media file");b(a.ya,["idle"],"attachDRM() can only be called while Video is not initialized with media file");b(a.Ba,["idle"],"detachDRM() can only be called while Video is not initialized with media file");b(a.play,["ready","paused"],"play() can only be called when Video is ready to play");b(a.Na,["playing"],"pause() can only be called when Video is playing");b(a.ua,c,"stop() can only be called when Video is initialized with a media file");
b(a.wb,c,"getUrl() can only be called when Video is initialized with a media file");b(a.Ma,d,"getDuration() can only be called when Video has loaded the media");b(a.sa,d,"getPosition() can only be called when Video has loaded the media");b(a.Oa,["playing","paused","waiting","seeking","ended"],"setPosition() can only be called when Video has loaded the media");b(a.vb,d,"getPlaybackRate() can only be called when Video has loaded the media");b(a.Ab,d,"setPlaybackRate() can only be called when Video has loaded the media")}
function Ld(a,b,c){a=Error.call(this,(void 0===c?"Incorrect state":c)+"; Current state is "+a+", expected: "+b.join(" or "));this.message=a.message;"stack"in a&&(this.stack=a.stack)}y(Ld,Error);function U(a){M.call(this);var b=this;this.type=a.type;this.c=window.webapis.avplay;this.h=Ad(window.tizen.systeminfo.getCapability("http://tizen.org/feature/platform.version"),"5.0");this.a=a;this.g=null;this.m=function(c,d){return b.b("error",d)};N(this.a,this.a.a,this.m);this.g=this.j()}y(U,M);U.prototype.prepare=function(){var a=this;return va(function(b){if(1==b.b)return oa(b,a.g,2);Md(a);return oa(b,a.a.prepare(),0)})};U.prototype.f=function(){O(this.a,this.a.a,this.m);this.g=this.a=null};
U.prototype.B=function(){};U.prototype.j=function(){var a=this;return va(function(b){return oa(b,a.a.g(),0)})};function Md(a){if(!a.g)throw Error("Hook destroyed while preparing");};function Nd(a){U.call(this,a);this.l=!1}y(Nd,U);Nd.prototype.prepare=function(){var a=this,b;return va(function(c){if(1==c.b)return oa(c,U.prototype.prepare.call(a),2);Md(a);b={DeleteLicenseAfterUse:!0};a.a.c()&&(b.CustomData=a.a.c());a.a.f&&(b.LicenseServer=a.a.f);try{a.c.setDrm("PLAYREADY","SetProperties",JSON.stringify(b)),a.l=!0}catch(d){a.b("error",d)}c.b=0})};Nd.prototype.f=function(){this.l&&!this.h&&this.c.setDrm("PLAYREADY","Finalize","");U.prototype.f.call(this)};function Od(a){U.call(this,a);this.l=!1}y(Od,U);Od.prototype.prepare=function(){var a=this,b,c;return va(function(d){if(1==d.b)return oa(d,U.prototype.prepare.call(a),2);Md(a);b=a.a.c();c={CompanyName:b.Ib||"",Web:b.Gb||"",IPTV:b.Jb||""};try{a.h?a.c.setDrm("VERIMATRIX","SetProperties",JSON.stringify(c)):a.c.setDrm("VERIMATRIX","Initialize",JSON.stringify(c)),a.l=!0}catch(e){a.b("error",e)}d.b=0})};Od.prototype.f=function(){this.l&&!this.h&&this.c.setDrm("VERIMATRIX","Finalize","");U.prototype.f.call(this)};
Od.prototype.B=function(a){"DrmError"===a.name&&(a=["Verimatrix error",a.code,a.message].filter(function(b){return void 0!==b}).join(" "),this.b("error",Error(a)))};Od.prototype.j=function(){var a=this;return va(function(b){a.h?a.c.getUID("VERIMATRIX"):a.c.setDrm("VERIMATRIX","GetUID","");return oa(b,U.prototype.j.call(a),0)})};function Pd(a,b,c){Jd.call(this,a,b);var d=this;this.c=window.webapis.avplay;this.bb=window.tizen.tvaudiocontrol;this.O=c;this.$=this.g=null;this.Y=!1;this.m=null;this.C=1;this.B=this.l=null;this.f=new Map;this.N=this.T.bind(this);Qd(this);this.H=function(e,g){d.T(g)};this.La=function(e,g){return Rd(d,g)};try{Sd(this)}catch(e){throw T(this.a,"invalid"),e;}}y(Pd,Jd);n=Pd.prototype;
n.prepare=function(a,b){function c(){!b["is-4k"]&&!b["is-8k"]||Ad(d.O,"5.0.0")||d.c.setStreamingProperty("SET_MODE_4K","TRUE");"start-position"in b&&(d.b("debug-message","starting at "+b["start-position"]),d.c.seekTo(b["start-position"],function(){return d.b("debug-message","seekto callback")}));Cd(d.B);d.c.prepareAsync(function(){d.b("debug-message","prepareAsync callback");d.j.Ha=!0;Td(d);V(d)},d.N)}var d=this;b=void 0===b?{}:b;Gd(this.a,"loading");b["is-4k"]&&!window.webapis.productinfo.isUdPanelSupported()&&
this.T(Error("4K is not supported"));!b["is-8k"]||window.webapis.productinfo.is8KPanelSupported&&window.webapis.productinfo.is8KPanelSupported()||this.T(Error("8K is not supported"));W(this,function(){return d.c.open(a)});this.l=a;V(this);this.f.size?Promise.all(Array.from(this.f.values()).map(function(e){return e.prepare()})).then(c,function(e){"destroyed"===d.a.a||Hd(d.a)?(console.error(e),d.b("debug-message",e.message)):d.T(e instanceof Error?e:Error(e))}):c();T(this.a,"loading")};
n.play=function(){var a=this;this.b("will-play");Gd(this.a,"playing");W(this,function(){return a.c.play()});V(this)};n.Na=function(){var a=this;this.b("will-pause");Gd(this.a,"paused");W(this,function(){return a.c.pause()});V(this)};n.ua=function(){var a=this;this.b("will-stop");Qd(this);var b="IDLE"===this.c.getState();W(this,function(){return a.c.stop()});W(this,function(){return a.c.close()});this.l=null;this.C=1;b?T(this.a,"idle"):Gd(this.a,"idle");V(this)};n.sa=function(){return this.c.getCurrentTime()};
n.Oa=function(a){var b=this;this.b("will-seek",a);this.g=this.a.a;this.c.seekTo(a,function(){return Ud(b)},this.N);T(this.a,"seeking")};n.Ma=function(){return"1"===this.c.getStreamingProperty("IS_LIVE")?Infinity:this.c.getDuration()};n.vb=function(){return this.C};n.Ab=function(a){var b=this;this.b("will-change-rate",a);this.C=a;W(this,function(){return b.c.setSpeed(a)});this.b("rate-change",a)};n.wb=function(){return this.l};
n.ya=function(a){switch(a.type){case "playready":var b=new Nd(a);break;case "verimatrix":b=new Od(a);break;default:throw new La(a.type+" DRM");}b&&(this.f.set(a.type,b),N(b,"error",this.H))};n.Ba=function(a){var b=this.f.get(a);b&&(O(b,"error",this.H),b.f(),this.f.delete(a));return Promise.resolve()};
function Sd(a){a.c.setListener(Vd(a));a.Y=!0;a.h=document.createElement("object");a.h.setAttribute("id","av-player");a.h.setAttribute("type","application/avplayer");a.h.style.position="absolute";document.body.insertBefore(a.h,document.body.firstChild);a.Z=a.c.getState();setInterval(function(){return V(a)},100);N(a.a,"state-enter",a.La);a.bb.setVolumeChangeListener(function(b){a.b("volume-change",b)});a.B=new Bd(a.c,a.h,a.la,a.da,a.O);Cd(a.B)}
function Vd(a){for(var b={onbufferingstart:a.hb,onbufferingcomplete:a.gb,oncurrentplaytime:a.ib,onstreamcompleted:a.jb,ondrmevent:a.kb,onevent:void 0,onsubtitlechange:void 0,onhttperrorevent:void 0,onuserdata:void 0},c={},d=r(Object.entries(b)),e=d.next();!e.done;c={ca:c.ca,ka:c.ka},e=d.next())e=r(e.value),c.ca=e.next().value,c.ka=e.next().value,b[c.ca]=function(g){return function(h){for(var f=[],k=0;k<arguments.length;++k)f[k]=arguments[k];a.fb.apply(a,[g.ca,g.ka].concat(v(f)))}}(c);b.onerror=function(g){return a.T(Error(g))};
return b}n.fb=function(a,b,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];this.b("debug-message","avplay "+a+": ["+d.map(function(g){return JSON.stringify(g)}).join(", ")+"]");b&&("destroyed"===this.a.a||Hd(this.a)||"error"===this.a.a?this.b("debug-message","avplay "+a+" ignored because video is in "+this.a.a+" state"):this.Y?b&&W(this,b.bind.apply(b,[this].concat(v(d)))):this.b("debug-message","avplay "+a+" ignored because callback is not active"))};
function Ud(a){a.b("seeked",a.sa());"ended"===a.g?(T(a.a,"playing"),W(a,function(){return a.c.play()})):a.g&&T(a.a,a.g);a.g=null;V(a)}n.hb=function(){this.b("debug-message","avplay bufferingstart");"loading"===this.a.a?this.j.pa=!1:"seeking"!==this.a.a&&"NONE"!==this.c.getState()&&"waiting"!==this.a.a&&(this.m=this.a.a,T(this.a,"waiting"))};
n.gb=function(){this.b("debug-message","avplay bufferingcomplete");if("loading"===this.a.a)this.j.pa=!0,Td(this);else if("seeking"!==this.a.a){var a=this.c.getState();"IDLE"!==a&&"PAUSED"!==a&&"NONE"!==a&&"waiting"===this.a.a&&this.m&&(T(this.a,this.m),this.m=null)}};n.ib=function(a){"playing"===this.a.a&&!this.a.c&&this.b("time-update",a)};n.jb=function(){T(this.a,"ended");V(this)};
function V(a){var b=a.c.getState();if(b!==a.Z){a.Z=b;a.b("debug-message","avplay state change detected",b);var c=a.a.c;switch(b){case "READY":a.j.readyState=!0;Td(a);break;case "PLAYING":T(a.a,"playing");break;case "PAUSED":T(a.a,"paused");break;case "IDLE":c&&"loading"===c.from&&"idle"===c.V&&T(a.a,"idle");break;case "NONE":"idle"===a.a.a||"destroyed"===a.a.a||T(a.a,"idle")}}}
n.kb=function(a,b){this.b("debug-message","drmevent",a+" "+JSON.stringify(b));var c={};a=(c.PLAYREADY="playready",c.VERIMATRIX="verimatrix",c)[a];(a=this.f.get(a))&&a.B(b)};function Td(a){var b=a.j,c=b.readyState,d=b.pa;b.Ha&&c&&d&&(Cd(a.B),T(a.a,"ready"))}function Qd(a){a.j={Ha:!1,readyState:!1,pa:!0}}function W(a,b){try{b()}catch(c){throw a.T(c),c;}}
n.T=function(a){Id(this.a);a=[a.name,a.code,a.message].filter(function(b){return void 0!==b}).join(" ");"destroyed"===this.a.a?this.b("debug-message","Error happened in destroyed state: "+a):("error"===this.a.a||T(this.a,"error"),this.b("error",a))};
function Rd(a,b){var c=["loading","waiting","playing","seeking"].includes(b)?window.webapis.appcommon.AppCommonScreenSaverState.SCREEN_SAVER_OFF:window.webapis.appcommon.AppCommonScreenSaverState.SCREEN_SAVER_ON;a.$!==c&&(a.$=c,window.webapis.appcommon.setScreenSaver(c,function(){a.b("debug-message","ScreenSaver state changed to "+c)},function(d){console.error("Error changing screenSaver state",d);a.b("debug-message","Failed to change screenSaver state: "+d)}))};function Wd(){gc.call(this);this.c=window.tizen}y(Wd,gc);function Xd(){var a=R.a;var b=a.info;b=Ob($a(0,0,b.b.getCapability("http://tizen.org/feature/screen.width"),b.b.getCapability("http://tizen.org/feature/screen.height")))||3;return new Pd(Nb[b],Nb[Ob($a(0,0,window.screen.width,window.screen.height))||2],a.info.version())}Wd.prototype.h=function(){this.c.application.getCurrentApplication().exit()};
function dc(a){a=a.c.application.getCurrentApplication().getRequestedAppControl();if(!a)return{};a=a.appControl.data.find(function(b){return"PAYLOAD"===b.key});if(!a)return{};a=JSON.parse(a.value[0]).values;if(!a)return{};try{return JSON.parse(a)}catch(b){if(b instanceof SyntaxError)Fa("Error parsing launch params: "+b.message);else throw b;}return{}}Wd.prototype.j=function(){this.b("tizen-app-control",dc(this))};function Zb(){return window.tizen&&window.tizen.systeminfo&&window.tizen.systeminfo.getPropertyValue?new Wd:null};function Yd(){Yb.call(this)}y(Yd,Yb);var Zd=0;function $d(a){var b=null;if(a.firstChild)b=a.firstChild;else if(a.nextSibling)b=a.nextSibling;else if(a.parentNode){for(b=a;b&&b.parentNode&&!b.parentNode.nextSibling;)b=b.parentNode;b&&b.parentNode&&b.parentNode.nextSibling?b=b.parentNode.nextSibling:b=null}return b}function ae(a,b,c,d){Zd++;d[Zd]=[a,b,c||"__null__"];return"<cutejs>component"+Zd+"</cutejs>"}function X(a){throw Error("Include name is already defined: "+a);}function be(a){throw Error("UNKNOWN KEY: "+a);}
function ce(a,b,c,d,e){function g(m,q){var p=h.exec(m);m="partial"==p[1];p=p[2];var t=b[p],u=t[0],z=t[1];t=t[2];t={qa:null,object:null,name:"__null__"===t?null:t,Ea:!m};m?(q=z?u(z,e):u(e),t.qa=q.root,q.root=null):(q=q?new u(q,z):new u(z),t.qa=q.ga());delete b[p];t.object=q;return t}var h=/^(partial|component)(\d+)$/,f=e&&e.Hb||function(){},k=e&&e.xa||function(){},l=document.createElement("div");l.innerHTML=a;(function(m){for(var q=[],p=null;m;){var t=$d(m);if(1==m.nodeType&&m.hasAttribute("data-export-id")){var u=
m.getAttribute("data-export-id");m.removeAttribute("data-export-id");m.setAttribute("data-exported-id",u);c(m,u,d)}else if("CUTEJS"===m.nodeName&&h.test(m.firstChild.nodeValue)){u=g(m.firstChild.nodeValue);var z=u.name,Pa=u.object;u.Ea&&!p&&f(Pa,z);var la=u.qa;la.hasChildNodes()||la.nodeType?(t=la.lastChild,11!==la.nodeType&&(t=la),m.parentNode.insertBefore(la,m),m.parentNode.removeChild(m),t=$d(t)):m.parentNode.removeChild(m);u.Ea&&(p?p.rb(Pa,z):k(Pa,z));z&&c(Pa,z,d)}else 1==m.nodeType&&m.hasAttribute("data-component")&&
(u=m.getAttribute("data-component"),m.removeAttribute("data-component"),m=g(u,m),u=m.object,p?p.rb(u,m.name):(f(u,m.name),k(u,m.name)),q.push(u),p=u,m.name&&c(u,m.name,d));p&&t&&t.previousSibling==p.ga()&&(q.pop(),p=q[q.length-1]||null);m=t}})(l);for(a=document.createDocumentFragment();l.firstChild;)a.appendChild(l.firstChild);c(a,"root",d);return d};function Y(){Xb.call(this);this.m=this.ta();this.g.appendChild(this.m.root)}y(Y,Xb);function de(a){return{xa:function(b,c){sb(a,b,/\[]$/.test(c)?"":c)}}};function ee(){Q.call(this);this.f=null;this.m="want-focus"}y(ee,Q);n=ee.prototype;n.ga=function(){return this.f};function fe(a){if(a.isVisible()){a=a.f.getBoundingClientRect();var b=L({o:0,s:0,u:0,v:0});Ta(b,H("left"),a.left);Ta(b,H("right"),a.left+a.width);Ta(b,H("up"),a.top);Ta(b,H("down"),a.top+a.height);a=b}else a=null;return a}function jb(a){var b=[];if(!a.isVisible())return b;if(0<rb(a).length)return rb(a).forEach(function(c){b=b.concat(jb(c))}),b;a=fe(a);if(!a)return b;b.push(a);return b}
function gb(a){return 0<rb(a).length?a.c?gb(a.c):null:fe(a)}n.isVisible=function(){return!0};function xb(a){a.a.forEach(function(b){return xb(b)})}function zb(a){a.a.forEach(function(b){return zb(b)})}function Cb(a){a.a.forEach(function(b){return Cb(b)})}function Db(a){a.a.forEach(function(b){return Db(b)})}n.M=function(){Q.prototype.M.call(this);this.f.classList.remove("_active");this.b("blur")};n.S=function(a){Q.prototype.S.call(this,a);this.f.classList.add("_active");this.b("focus",a)};n.K=function(){return!0};
function Bb(a,b){a.a.forEach(function(c){Bb(c,b&&!0)})};function ge(){ee.call(this);this.g=this.h();a:{var a=this.g.root;for(var b=0;b<a.childNodes.length;b++)if(1===a.childNodes[b].nodeType){a=a.childNodes[b];break a}a=null}this.f=a;a.classList.add("zb-widget")}y(ge,ee);function he(a){return{xa:function(b,c){sb(a,b,/\[]$/.test(c)?"":c)}}};function ie(a){return ce('<div class="w-greeting">\n\t<h2>Hello, ZombieBox!</h2>\n\t<p>Use Back and Forward buttons to navigate through scene history, open up Player scene to populate it.</p>\n</div>\n',{},function(b,c,d){switch(c){case "root":d.root?X(c):d.root=b;break;default:be(c)}},{root:null},a)};function je(){ge.call(this)}y(je,ge);je.prototype.K=function(){return!1};je.prototype.h=function(){return ie(he(this))};function ke(a){return ce('<div class="w-button" data-export-id="title"></div>\n',{},function(b,c,d){switch(c){case "root":d.root?X(c):d.root=b;break;case "title":d.title?X(c):d.title=b;break;default:be(c)}},{root:null,title:null},a)};function Z(a){ge.call(this);var b=this.g.title;if(1===b.childNodes.length&&b.firstChild instanceof Text)b.firstChild.nodeValue=a;else{for(;b.firstChild;)b.removeChild(b.firstChild);b.appendChild(document.createTextNode(a))}}y(Z,ge);Z.prototype.G=function(a,b){return 21===a?(this.b("click"),!0):ge.prototype.G.call(this,a,b)};Z.prototype.h=function(){return ke(he(this))};function le(a){var b={};var c='<h1>Empty "zombie274" project!</h1>\n\n'+ae(je,{},"greeting",b)+'\n\n<div class="row scenes">\n\t'+ae(Z,"Player","playerButton",b)+'\n</div>\n<div class="row history">\n\t'+ae(Z,"Back in history","backButton",b)+"\n\t"+ae(Z,"Forward in history","forwardButton",b)+"\n</div>\n";return ce(c,b,function(d,e,g){switch(e){case "root":g.root?X(e):g.root=d;break;case "greeting":g.Ca?X(e):g.Ca=d;break;case "playerButton":g.ja?X(e):g.ja=d;break;case "backButton":g.I?X(e):g.I=d;
break;case "forwardButton":g.J?X(e):g.J=d;break;default:be(e)}},{root:null,Ca:null,ja:null,I:null,J:null},a)};function me(){Y.call(this);this.g.classList.add("s-home");this.O=this.mb.bind(this);this.h=this.Pa.bind(this);this.N=this.Qa.bind(this)}y(me,Y);n=me.prototype;n.ba=function(){Y.prototype.ba.call(this);var a=this.m,b=a.I,c=a.J;N(a.ja,"click",this.O);N(b,"click",this.h);N(c,"click",this.N)};n.aa=function(){Y.prototype.aa.call(this);var a=this.m,b=a.I,c=a.J;O(a.ja,"click",this.O);O(b,"click",this.h);O(c,"click",this.N)};n.ta=function(){return le(de(this))};
n.mb=function(){var a=R.c.c.player;R.l.open(a,function(){a.play("http://vs.ifaced.ru/streams/bbb/bbb.mp4")})};n.Pa=function(){ec(R)};n.Qa=function(){fc()};function ne(a){var b={};var c='<div class="row scenes">\n\t'+ae(Z,"Home","homeButton",b)+'\n</div>\n<div class="row history">\n\t'+ae(Z,"Back in history","backButton",b)+"\n\t"+ae(Z,"Forward in history","forwardButton",b)+"\n</div>\n";return ce(c,b,function(d,e,g){switch(e){case "root":g.root?X(e):g.root=d;break;case "homeButton":g.ha?X(e):g.ha=d;break;case "backButton":g.I?X(e):g.I=d;break;case "forwardButton":g.J?X(e):g.J=d;break;default:be(e)}},{root:null,ha:null,I:null,J:null},a)};function oe(){Y.call(this);this.g.classList.add("s-player");this.da=this.lb.bind(this);this.N=this.Ua.bind(this);this.O=this.Va.bind(this);pe(this)}y(oe,Y);n=oe.prototype;n.ba=function(){Y.prototype.ba.call(this);R.m.classList.add("_transparent");var a=this.m,b=a.I,c=a.J;N(a.ha,"click",this.da);N(b,"click",this.N);N(c,"click",this.O)};n.aa=function(){Y.prototype.aa.call(this);R.m.classList.remove("_transparent");var a=this.m,b=a.I,c=a.J;O(a.ha,"click",this.da);O(b,"click",this.N);O(c,"click",this.O)};
n.U=function(){var a=this,b=this.h.sa(),c=this.h.l;this.h.ua();return function(){var d={};a.h.prepare(c,(d["start-position"]=b,d))}};n.play=function(a){this.h.prepare(a)};n.ta=function(){return ne(de(this))};function pe(a){a.h=Xd();N(a.h,a.h.F,function(){return a.h.play()})}n.lb=function(){R.l.open(R.c.c.home)};n.Ua=function(){ec(R)};n.Va=function(){fc()};function qe(){Yd.apply(this,arguments)}y(qe,Yd);qe.prototype.Fa=function(){var a=new me;this.c.register(a,"home");a=new oe;this.c.register(a,"player")};qe.prototype.Ga=function(){var a=this.g;a.a=[];a.b=-1;this.l.open(this.c.c.home)};var R=new qe;
</script>
	<script>/* ES6/DOM4 polyfill | @version 0.8.8 | MIT License | github.com/termi */
void function(){"use strict";var k=void 0,l=!0,p=null,r=!1;function u(a,b){return Number.isNaN(a)||b&1&&0===a||b&128&&Infinity===a||b&256&&-Infinity===a?a:b&4&&0===a||b&2048&&-1===a?-Infinity:b&32&&1===a||b&512&&Infinity===a?Infinity:b&16&&1===a||b&64&&1===a?0:b&1024&&-Infinity===a?-1:b&2&&0===a?1:l}function x(){}function ia(a,b){a+="";var c=this.contains(a),e=c?b!==l&&"remove":b!==r&&"add";if(e)this[e](a);return c}function Z(a){return a}function ja(){return r}function ka(){}function $(a){var b=Object.create(DOMException.prototype);b.code=
DOMException[a];b.message=a+": DOM Exception "+b.code;throw b;}function w(a,b){for(var c=1;c<arguments.length;c++){var e=arguments[c],j;for(j in e)B(e,j)&&!B(a,j)&&(a[j]=e[j])}return a}function C(a,b,c){return R.call(a,b,G.call(arguments,2))}var f=this,D=f._,K=Object.prototype,s=String.prototype,t=Array.prototype,R=D&&D.apply||Function.prototype.apply,G=t.slice,sa=t.splice,ta,E,S=s.split,d=Function.prototype.bind,H=(f.opera||f.attachEvent||/\n/.test(d))&&d||function(a,b){var c=this,e;return 1<arguments.length?
(e=G.call(arguments,1),function(){return R.call(c,a,e.concat(G.call(arguments)))}):function(){return R.call(c,a,arguments)}},B=H.call(Function.prototype.call,K.hasOwnProperty),v="a"!==Object("a")[0]||!(0 in Object("a"))?function(a,b){a==p&&!b&&x("invalid object");return a&&"[object String]"===la.call(a)?S.call(a,""):Object(a)}:function(a,b){a==p&&!b&&x("invalid object");return Object(a)},la=K.toString,g=f.Element&&f.Element.prototype||{},I=f.Node&&f.Node.prototype||{},L=H.call(document.__orig__createElement__||
document.createElement,document),q=L("p"),F,aa=1,ba,Da=/^(\w+)?((?:\.(?:[\w\-]+))+)?$|^#([\w\-]+$)/,Ea=/\s*([,>+~ ])\s*/g,ma,J,y,ca,M,ua,T,da,va,wa,N,O,z,na,oa,ea,P,Q,U,fa,V,n=f.Date,A,xa,ya,ga,W,pa,X,qa=D&&D.isPlainObject||function(a){return a&&"[object Object]"===la.call(a)};ta="attachEvent"in document&&"all"in document&&"uniqueId"in document.documentElement&&+((/msie (\d+)/i.exec(navigator.userAgent)||[])[1]||0)||p;f.HTMLDocument||(f.HTMLDocument=f.Document);f.Document||(f.Document=f.HTMLDocument);
f.DocumentFragment||(f.DocumentFragment=f.HTMLDocument);document.head||(document.head=document.getElementsByTagName("HEAD")[0]);Object.append=w;Object.extend||(Object.extend=function(a,b){for(var c=1,e=arguments.length,j;c<e;c++)if(j=arguments[c])for(var d in j)B(j,d)&&(a[d]=j[d]);return a});Object.isPlainObject||(Object.isPlainObject=qa);Function.prototype.bind||
(Function.prototype.bind=function(a,b){"function"!=typeof this&&(ta?!(this&&"apply"in this):0!==ea.call(this+"").indexOf("function"))&&x("Function.prototype.bind called on incompatible "+this);var c=this,e,j;1<arguments.length?(e=G.call(arguments,1),j=function(){return R.call(c,qa(this)&&this instanceof j?this:a,e.concat(G.call(arguments)))}):j=function(){return R.call(c,qa(this)&&this instanceof j?this:a,arguments)};c.prototype&&(j.prototype=Object.create(c.prototype));return j});var ha,za,Aa=!{toString:p}.propertyIsEnumerable("toString");
Aa&&(ha="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),za=ha.length);w(Object,{keys:function(a){("object"!=typeof a&&"function"!=typeof a||a===p)&&x("Object.keys called on a non-object");var b=[],c;for(c in a)B(a,c)&&b.push(c);if(Aa)for(c=0;c<za;c++)B(a,ha[c])&&b.push(ha[c]);return b},getOwnPropertyNames:function(a){return Object.keys(a)},seal:Z,freeze:Z,preventExtensions:Z,isSealed:ja,isFrozen:ja,isExtensible:function(a){Object(a)!==a&&
x("invalid object");for(var b="",c;B(a,b);)b+="?";a[b]=l;c=B(a,b);delete a[b];return c},getPrototypeOf:function(a){return a.__proto__||(a.constructor?a.constructor.prototype:K)},create:function(a,b){var c;a===p?c={__proto__:p}:("object"!=typeof a&&x("typeof prototype["+typeof a+"] != 'object'"),ka.prototype=a,c=new ka,ka.prototype=p,c.__proto__=a);b&&Object.defineProperties(c,b);return c},isObject:function(a){var b;return a&&("object"===(b=typeof a)||"function"===b)}});if(Object.getOwnPropertyDescriptor){var d=
function(a){try{return a.a=0,0===Object.getOwnPropertyDescriptor(a,"a").value}catch(b){return r}},Y;if(!(Y=!d({})))if(!(Y=!d(q)))if(!(Y=!document.__proto__)){try{Object.getOwnPropertyDescriptor(document.__proto__,"firstChild"),J=l}catch(Ga){J=r}Y=!J}Y&&(V=Object.getOwnPropertyDescriptor)}if(Object.defineProperty&&(d=function(a){try{return Object.defineProperty(a,"sentinel",{}),"sentinel"in a}catch(b){return r}},!d({})||!d(q)))U=Object.defineProperty,fa=Object.defineProperties;if(!Object.defineProperty||
U)Object.defineProperty=function(a,b,c){("object"!=typeof a&&"function"!=typeof a||a===p)&&x("Object.defineProperty called on non-object: "+a);("object"!=typeof c&&"function"!=typeof c||c===p)&&x("Property description must be an object: "+c);if(U)try{return U.call(Object,a,b,c)}catch(e){if(-2146823252===e.number){c.enumerable=r;try{return U.call(Object,a,b,c)}catch(j){}}}if(c.value!==k)if(a.__defineGetter__&&(a.__lookupGetter__(b)||a.__lookupSetter__(b))){var d=a.__proto__;a.__proto__=K;delete a[b];
a[b]=c.value;a.__proto__=d}else a[b]=c.value;else a.__defineGetter__?(c.get!==k&&a.__defineGetter__(b,c.get),c.set!==k&&a.__defineSetter__(b,c.set)):Object.defineProperty.sham?(c.get!==k&&(a["get"+b]=c.get),c.set!==k&&(a["set"+b]=c.set)):x("getters & setters not supported");return a};g.ie&&(Object.defineProperty.sham=l);if(!Object.defineProperties||fa)Object.defineProperties=function(a,b){if(fa)try{return fa.call(Object,a,b)}catch(c){}for(var e in b)B(b,e)&&Object.defineProperty(a,e,b[e]);return a};
if(!Object.getOwnPropertyDescriptor||V)Object.getOwnPropertyDescriptor=function(a,b){("object"!=typeof a&&"function"!=typeof a||a===p)&&x("Object.getOwnPropertyDescriptor called on a non-object: "+a);if(V)try{return V.call(Object,a,b)}catch(c){}if(B(a,b)){var e={enumerable:l,configurable:l},j,d;if(a.__defineGetter__){var h=a.__proto__;a.__proto__=K;j=a.__lookupGetter__(b);d=a.__lookupSetter__(b);a.__proto__=h}else Object.defineProperty.sham&&(j=a["get"+b],d=a["set"+b]);if(j||d)return j&&(e.get=j),
d&&(e.set=d),e;e.value=a[b];return e}};if(!Object.getPropertyDescriptor||V){var Ba=Object.getPropertyDescriptor;Object.getPropertyDescriptor=function(a,b){if(Ba)try{return Ba.call(Object,a,b)}catch(c){}for(var e=Object.getOwnPropertyDescriptor(a,b),j=a;!e&&(j=Object.getPrototypeOf(j));)e=Object.getOwnPropertyDescriptor(j,b);return e}}w(Object,{getOwnPropertyDescriptors:function(a){var b={};z.call(Object.getOwnPropertyNames(a),function(b){this[b]=Object.getOwnPropertyDescriptor(a,b)},b);return b}});2!==[1,2].splice(0).length&&(t.splice=function(a,b){if(!arguments.length)return[];arguments[0]==k&&(arguments[0]=0);1===arguments.length&&(arguments[1]=this.length-arguments[0]);return sa.apply(this,arguments)});O=function(a,b,c){var e="function"===typeof this&&this!==Array;if(!e&&b)return N.call(a,b,c);var j=v(a,l),d,h;if(e)d=j.length>>>0,h=e&&v(new this(d));else{try{h=G.call(j)}catch(f){h=p}d=j.length>>>0;if(h&&h.length===d)return h;h=Array(d)}if(b)for(e=0;e<d;e++)e in j&&(h[e]=C(b,c,
j[e],e,a));else for(e=0;e<d;e++)e in j&&(h[e]=j[e]);return h};w(Array,{from:O,of:function(a){return O(arguments)}});oa=t.find&&t.findIndex?p:function(a,b,c){var e=v(this),j=e.length>>>0,d,h=0;for(;h<j;++h)if(h in e&&(d=e[h],C(a,b,d,h,this)))return c?h:d;return c?-1:k};w(t,{contains:function(a){return!!~this.indexOf(a)},find:function(a,b){return oa.call(this,a,b,r)},findIndex:function(a,b){return oa.call(this,a,b,l)}});z=t.forEach||function(a,b){for(var c=v(this),e=c.length>>>0,j=
-1;++j<e;)j in c&&C(a,b,c[j],j,this)};N=t.map||function(a,b){var c=v(this),e=c.length>>>0,j=Array(e),d;for(d=0;d<e;d++)d in c&&(j[d]=C(a,b,c[d],d,this));return j};Array.isArray||(Array.isArray=function(a){return"[object Array]"===la.call(a)});na=t.every&&t.some?p:function(a,b,c){c===k&&(c=l);for(var e=v(this),j=e.length>>>0,d=0,h=c;d<j&&h==c;++d)d in e&&(h=C(a,b,e[d],d,this));return h};w(t,{reduce:function(a,b){var c=v(this),e=c.length>>>0,d=0;0===e&&1>=arguments.length&&x("Array length is 0 and no second argument");
for(b===k&&(b=(++d,c[0]));d<e;++d)d in c&&(b=C(a,k,b,c[d],d,this));return b},reduceRight:function(a,b){var c=v(this),e=c.length>>>0;0===e&&1>=arguments.length&&x("Array length is 0 and no second argument");--e;for(b===k&&(b=(--e,c[e+1]));0<=e;--e)e in c&&(b=C(a,k,b,c[e],e,this));return b},forEach:z,indexOf:function(a,b){var c=v(this),e=c.length>>>0;if(!e||(b=Number.toInteger(b))>=e)return-1;for(b=(e+b)%e;b<e&&(!(b in c)||c[b]!==a);b++);return b^e?b:-1},lastIndexOf:function(a,b){var c=v(this),e=c.length>>>
0,d;if(!e)return-1;d=e-1;b!==k&&(d=Math.min(d,Number.toInteger(b)));for(d=0<=d?d:e-Math.abs(d);0<=d;d--)if(d in c&&c[d]===a)return d;return-1},every:function(a,b){return na.call(this,a,b)},some:function(a,b){return na.call(this,a,b,r)},filter:function(a,b){var c=v(this),e=c.length>>>0,d=[],f,h;for(h=0;h<e;h++)h in c&&(f=c[h],C(a,b,f,h,this)&&d.push(f));return d},map:N});z.call("join forEach every some map filter reduce reduceRight indexOf lastIndexOf slice contains find findIndex".split(" "),function(a){this[a]||
(this[a]=H.call(function(b){return this[a].apply(b,G.call(arguments,1))},t))},Array);if(!s.trim||"\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff".trim()||!(P=s.trimLeft)||!(Q=s.trimRight))d="[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]",P=function(){return String(this).replace(P.__re,"")},P.__re=RegExp("^"+d+d+"*"),Q=function(){return String(this).replace(Q.__re,
"")},Q.__re=RegExp(d+d+"*$");if(!s.trim||"\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff".trim())s.trim=function(){return P.call(Q.call(this))};ea=s.trim;"0".split(k,0).length&&(s.split=function(a,b){return a===k&&0===b?[]:S.call(this,a,b)});E=s.contains||function(a,b){return-1!==this.indexOf(a,b)};w(s,{repeat:function(a){if(0>(a=Number.toInteger(a)))return"";for(var b="",c=this;a;)if(a&1&&(b+=c),a>>=1)c+=c;return b},
startsWith:function(a,b){a+="";b=+b||0;0>b&&(b=0);return!a.length?l:this.charCodeAt(b)===a.charCodeAt(0)&&this.indexOf(a,b)===b},endsWith:function(a,b){var c=this.length;b===k&&(b=c);b=+b;a+="";var e=a.length;if(!e)return l;if(!b||1>b)return r;b=(c<b?c:b)-e;return 0<=b&&this.charCodeAt(b+e-1)===a.charCodeAt(e-1)&&this.lastIndexOf(a,b)===b},contains:E,reverse:function(){return S.call(this+"","").reverse().join("")},trimLeft:P,trimRight:Q,codePointAt:function(a){var b=String(this),c=b.length,e;if(0>
(a|=0)||a>=c)return NaN;e=b.charCodeAt(a);if(55296>e||56319<e||a+1==c)return e;a=b.charCodeAt(a+1);return 56320>a||57343<e?e:(e-55296<<1024)+(a-56320)+65536}});String.fromCodePoint||(String.fromCodePoint=function(a){for(var b=arguments.length,c=[],e;b--;){e=arguments[b];if(0>e||1114111<e)throw new RangeError;65536>e?c.unshift(e):(e-=65536,c.unshift(55296|e>>10,56320|e&1023))}return String.fromCharCode.apply(String,c)});w(Number,{MAX_INTEGER:9007199254740991,EPSILON:2.220446049250313E-16,parseInt:f.parseInt,
parseFloat:f.parseFloat,isNaN:function(a){return"number"===typeof a&&f.isNaN(a)},isFinite:function(a){return"number"===typeof a&&f.isFinite(a)},isInteger:function(a){return Number.isFinite(a)&&-9007199254740992<=a&&a<=Number.MAX_INTEGER&&Math.floor(a)===a},toInteger:function(a){a=+a;return f.isNaN(a)?0:0===a||!f.isFinite(a)?a:(0>a?-1:1)*Math.floor(Math.abs(a))}});Number.isNumeric=function(a){return!f.isNaN(f.parseFloat(a))&&f.isFinite(a)};w(f.Math,{acosh:function(a){var b=u(a=+a,144);return b===l?
1>a?NaN:Math.log(a+Math.sqrt(a*a-1)):b},asinh:function(a){var b=u(a=+a,392);return b===l?Math.log(a+Math.sqrt(a*a+1)):b},atanh:function(a){var b=u(a=+a,2081);return b===l?-1>a||1<a?NaN:0.5*Math.log((1+a)/(1-a)):b},cbrt:function(a){var b=u(a=+a,385);if(b===l){var c=0>a;c&&(a=-a);b=Math.pow(a,1/3);return c?-b:b}return b},cosh:function(a){var b=u(a=+a,385);return b===l?(0>a&&(a=-a),21<a?Math.exp(a)/2:(Math.exp(a)+Math.exp(-a))/2):b},expm1:function(a){var b=u(a=+a,1153);return b===l?-1E-5<a&&1E-5>a?a+
0.5*a*a:Math.exp(a)-1:b},hypot:function(a,b,c){if(0===a+b+c)return 0;c==p&&(c=0);var e;return l!==(e=u(a=+a,384))||l!==(e=u(b=+b,384))||l!==(e=u(c=+c,384))?e:Math.sqrt(a*a+b*b+c*c)},log2:function(a){var b=u(a=+a,196);return b===l?0>a?NaN:Math.log(a)*Math.LOG2E:b},log10:function(a){var b=u(a=+a,196);return b===l?0>a?NaN:Math.log(a)*Math.LOG10E:b},log1p:function(a){var b=u(a=+a,2177);return b===l?-1>a?NaN:-1E-4<a&&1E-4>a?(-0.5*a+1)*a:Math.log(1+a):b},sign:function(a){a=+a;return 0>a?-1:0<a?1:a},sinh:function(a){var b=
u(a=+a,385);return b===l?(Math.exp(a)-Math.exp(-a))/2:b},tanh:function(a){var b=u(a=+a,1025);if(b===l){if(Infinity===a)return 1;b=Math.exp(a);a=Math.exp(-a);return(b-a)/(b+a)}return b},trunc:function(a){var b=u(a=+a,385);return b===l?a-a%1:b},imul:function(a,b){var c=a&65535,e=b&65535;return c*e+((a>>>16&65535)*e+c*(b>>>16&65535)<<16>>>0)|0}});l;s=function(a,b){var c=document.createEvent("Events");b=b||{};c.initEvent(a,b.bubbles||r,b.cancelable||r);"isTrusted"in c||(c.f=r);return c};try{y=Event.prototype,
new Event("click")}catch(Ha){f.Event=s,y?s.prototype=y:y=s.prototype}J=function(a,b){var c,e;try{c=document.createEvent("CustomEvent")}catch(d){c=document.createEvent("Event")}b=b||{};e=b.detail!==k?b.detail:p;(c.initCustomEvent||(c.detail=e,c.initEvent)).call(c,a,b.bubbles||r,b.cancelable||r,e);"isTrusted"in c||(c.f=r);return c};try{ca=(f.CustomEvent||Event).prototype,new CustomEvent("magic")}catch(Ia){if(f.CustomEvent=J,ca||y)J.prototype=ca||y}try{d=document.createEvent("Event")}catch(Ja){d={}}"defaultPrevented"in
d||(Object.defineProperty(y,"defaultPrevented",{value:r}),ua=y.preventDefault,y.preventDefault=function(){this.defaultPrevented=l;ua.apply(this,arguments)});"stopImmediatePropagation"in d||(M=function(a){var b=this.d,c=this.e;if("function"!==typeof b)if(b&&"handleEvent"in b)c=b,b=b.handleEvent;else return;if(a.timeStamp&&a.__stopNow===a.timeStamp)a.stopPropagation();else return b.apply(c,arguments)},y.stopImmediatePropagation=function(){this.__stopNow=this.timeStamp||(this.timeStamp=(new Date).getTime())});
if("addEventListener"in q&&!q.addEventListener.__shim__){d=0;try{ba=function(){d++},q.addEventListener("click",ba),q.addEventListener("click",ba),q.click?q.click():q.dispatchEvent(new s("click"))}catch(Ka){}if(0==d||2==d||M){var Ca=2==d;z.call([f.HTMLDocument&&f.HTMLDocument.prototype||f.document,f.Window&&f.Window.prototype||f,I],function(a){if(a){var b=a.addEventListener,c=a.removeEventListener;b&&(a.addEventListener=function(a,c,d){var f,m;d=d||r;if(Ca||M){m="_e_8vj"+(d?"-":"")+(c.__UUID__||(c.__UUID__=
++aa))+a;if(!(f=this._))f=this._={};if(m in f)return;c=M?f[m]=H.call(M,{d:c,e:this}):f[m]=k;c}return b.call(this,a,c,d)},c&&(a.removeEventListener=function(a,b,d){var f,m;d=d||r;if(Ca||M)if((f=this._)&&f[m="_e_8vj"+(d?"-":"")+b.__UUID__+a])b=f[m],delete f[m];return c.call(this,a,b,d)}))}})}}T=function(a,b,c){this.__getter__=H.call(a,c);this.__setter__=H.call(b,c);this.length=0;this.value="";this.b()};da=function(a,b){var c=b||"",e=!!a.length;if(e){for(;0<a.length;)delete a[--a.length];a.value=""}c&&
((c=ea.call(c))&&S.call(c,/\s+/g).forEach(da.add,a),a.value=b);e&&a.__setter__&&a.__setter__(a.value)};da.add=function(a){this[this.length++]=a};w(T.prototype,{b:function(){var a=this.__getter__();a!==this.value&&da(this,a)},c:function(a,b){0===b&&$("WRONG_ARGUMENTS_ERR");""===a&&$("SYNTAX_ERR");/\s+/g.test(a)&&$("INVALID_CHARACTER_ERR")},add:function(){var a=arguments,b=0,c=a.length,e,d,f,h=r;this.b();this.c(p,c);d=this.value;f=" "+d+" ";do e=a[b]+"",this.c(e),E.call(f," "+e+" ")||(d+=(0<b||d&&!d.match(/\s+$/g)?
" ":"")+e,this[this.length++]=e,h=l);while(++b<c);h&&(this.value=d,this.__setter__&&this.__setter__(this.value))},remove:function(){var a=arguments,b=0,c=a.length,e,d,f,h=[],m={};this.b();this.c(p,c);d=this.value;f=d.length;do e=a[b]+"",this.c(e),m[e]=p;while(++b<c);a=S.call(d," ");d="";b=0;for(c=a.length;b<c;++b)if(!((e=a[b])in m))h.push(e),d+=(b?" ":"")+e;if(f!==d.length){for(b=this.length-1;0<=b;--b)if(!(this[b]=h[b]))this.length--,delete this[b];this.value=d;this.__setter__&&this.__setter__(this.value)}},
contains:function(a){this.c(a,arguments.length);this.b();return E.call(" "+this.value+" "," "+a+" ")},item:function(a){this.b();return this[a]||p},toggle:ia});T.prototype.toString=function(){this.b();return this.value||""};f.DOMStringCollection=T;d="AT_TARGET";if(!y[d]||Event[d])d={CAPTURING_PHASE:1,AT_TARGET:2,BUBBLING_PHASE:3},w(y,d),w(Event,d);if(f.getComputedStyle)try{f.getComputedStyle(q)}catch(La){f.getComputedStyle=H.call(function(a,b){return this.call(f,a,b||p)},f.getComputedStyle)}d=!("classList"in
q)?k:(q.classList.add(1,2),q.classList.contains(2))&&l||r;d||(d===k?(wa=function(a){this.className=a},va=function(){return this.className},Object.defineProperty(g,"classList",{get:function(){if(this.tagName){var a=this._||(this._={});a._ccl_||(a._ccl_=new T(va,wa,this));return a._ccl_}}})):d===r&&((d=f.DOMTokenList)&&(d=d.prototype))&&!function(a,b,c){d.add=function(){z.call(N.call(arguments,c),a,this)};d.remove=function(){z.call(N.call(arguments,c),b,this)};d.toggle=ia}.call(p,d.add,d.remove,function(a){return a+
""}));"parentElement"in q||Object.defineProperty(g,"parentElement",{get:function(){var a=this.parentNode;return a&&1===a.nodeType?a:p}});"contains"in q||(f.Node.prototype.contains=function(a){return!!(this.compareDocumentPosition(a)&16)});"insertAdjacentHTML"in q||(f.HTMLElement.prototype.insertAdjacentHTML=function(a,b){var c=this.ownerDocument.createElement("_"),e={beforebegin:"before",afterbegin:"prepend",beforeend:"append",afterend:"after"},d;c.innerHTML=b;(c=c.childNodes)&&(c.length&&(d=this[e[a]]))&&
d.apply(this,c)});if(document.importNode&&!document.importNode.shim)try{document.importNode(q)}catch(Ma){var Fa=document.importNode;delete document.importNode;document.importNode=function(a,b){b===k&&(b=l);return Fa.call(this,a,b)}}try{q.cloneNode()}catch(Na){[I,Comment&&Comment.prototype,g,ProcessingInstruction&&ProcessingInstruction.prototype,Document.prototype,DocumentType&&DocumentType.prototype,DocumentFragment.prototype].forEach(function(a){if(a){var b=a.cloneNode;delete a.cloneNode;a.cloneNode=
function(a){a===k&&(a=l);return b.call(this,a)}}})}g.matchesSelector||(g.matchesSelector=g.webkitMatchesSelector||g.mozMatchesSelector||g.msMatchesSelector||g.oMatchesSelector||function(a,b){if(!a)return r;if("*"===a)return l;var c,e,d,f=0,h,m,g;b?"length"in b&&!("nodeType"in b)?c=b[0]:(c=b,b=k):c=this;do if(g=r,c===document.documentElement?g=":root"===a:c===document.body&&(g="BODY"===a.toUpperCase()),!g)if(a=ea.call(a.replace(Ea,"$1")),h=a.match(Da))switch(a.charAt(0)){case "#":g=c.id===a.slice(1);
break;default:if((g=!h[1]||!("tagName"in c)||c.tagName.toUpperCase()===h[1].toUpperCase())&&h[2]){d=-1;m=h[2].slice(1).split(".");for(h=" "+c.className+" ";m[++d]&&g;)g=E.call(h," "+m[d]+" ")}}else{if(!/([,>+~ ])/.test(a)&&(e=c.parentNode)&&e.querySelector)g=e.querySelector(a)===c;if(!g&&(e=c.ownerDocument)){m=e.querySelectorAll(a);for(d=-1;!g&&m[++d];)g=m[d]===c}}while(g&&b&&(c=b[++f]));return b&&"length"in b?g&&b.length==f:g});document.documentElement.matchesSelector||(document.documentElement.matchesSelector=
g.matchesSelector);"matches"in g||(g.matches=document.documentElement.matches=g.matchesSelector||r);if(!q.prepend){F=function(a){var b=p,c=0,d=a.length;a=N.call(a,F.h);if(1===d)return a[0];b=document.createDocumentFragment();a=O(a);for(c=0;c<d;++c)b.appendChild(a[c]);return b};F.h=function(a){return"string"===typeof a?document.createTextNode(a):a};w(g,{after:function(){this.parentNode&&this.parentNode.insertBefore(F(arguments),this.nextSibling)},before:function(){this.parentNode&&this.parentNode.insertBefore(F(arguments),
this)},append:function(){this.appendChild(F(arguments))},prepend:function(){this.insertBefore(F(arguments),this.firstChild)},replace:function(){this.parentNode&&this.parentNode.replaceChild(F(arguments),this)},remove:function(){this.parentNode&&this.parentNode.removeChild(this)}});if(d=f.CharacterData||f.Text)d=d.prototype;d||(d=I);d&&(d.after||(d.after=g.after),d.before||(d.before=g.before),d.replace||(d.replace=g.replace),d.remove||(d.remove=g.remove));if(!("prepend"in document)&&(d=f.Document)&&
(d=d.prototype))document.prepend=d.prepend=function(){g.prepend.apply(this.documentElement,arguments)},document.append=d.append=function(){g.append.apply(this.documentElement,arguments)},f.DocumentFragment.prototype.prepend=g.prepend,f.DocumentFragment.prototype.append=g.append}d=document.createElement("select");d.innerHTML="<option>0</option>";try{d.remove()}catch(Oa){d=r}if(d===r||!d.childNodes.length)(d=f.HTMLSelectElement)&&((d=d.prototype)&&"remove"in d)&&!function(a,b){Object.defineProperty(a,
"remove",{value:function(a){arguments.length?b.apply(this,arguments):Element.prototype.remove.call(this)}})}.call(p,d,d.remove);!("find"in document)&&"querySelector"in q&&(ma=/(\:scope)(?=[ >~+])/gi,(f.Document.prototype||document).find=f.DocumentFragment.prototype.find=function(a,b){b&&("length"in b&&!("nodeType"in b)||(b=[b]))||(b=[this]);var c,d=0,f=b.length,g;do g=b[d],a=a.replace(ma,9==g.nodeType?":root":function(){return"#"+(g.id||(g.id="find__UUID__"+ ++aa))}),c=g.querySelector(a);while(!c&&
++d<f);return c||p},(f.Document.prototype||document).findAll=f.DocumentFragment.prototype.findAll=function(a,b){b&&("length"in b&&!("nodeType"in b)||(b=[b]))||(b=[this]);var c=[],d=0,f=b.length,g,h,m,n,q,s,u={},t;do if(g=b[d],a=a.replace(ma,9==g.nodeType?":root":function(){return"#"+(g.id||(g.id="find__UUID__"+ ++aa))}),h=g.querySelectorAll(a),1<f){n=0;for(q=h.length;n<q;++n)if(m=h[n],t=r,s=m.getAttribute("data-__UUID__")||(t=l,m.setAttribute("data-__UUID__",s=++aa),s),t||!(s in u))u[s]=p,c.push(h[n])}else c=
O(h);while(++d<f);return c});"find"in g||(g.find=g.querySelector,g.findAll=g.querySelectorAll);"labels"in L("input")||Object.defineProperty(g,"labels",{enumerable:l,get:function(){if(E.call(" INPUT BUTTON KEYGEN METER OUTPUT PROGRESS TEXTAREA SELECT ",(" "+this.nodeName+" ").toUpperCase())){for(var a=this,b=this.id?O(document.querySelectorAll("label[for='"+this.id+"']")):[],c=b.length-1;(a=a.parentNode)&&(!a.control||a.control===this);)if("LABEL"===a.nodeName.toUpperCase()){for(;b[c]&&b[c].compareDocumentPosition(a)&
2;)c--;sa.call(b,c+1,0,a)}return b}}});"control"in L("label")||(W=function(a,b){for(var c=0,d=a.length;c<d;c++){var f=a[c],g=b(f);if(g||f.childNodes&&0<f.childNodes.length&&(g=W(f.childNodes,b)))return g}return p},W.g=function(a){return E.call(" INPUT BUTTON KEYGEN METER OUTPUT PROGRESS TEXTAREA SELECT "," "+a.nodeName.toUpperCase()+" ")?a:p},Object.defineProperty((d=f.HTMLLabelElement)&&d.prototype||g,"control",{enumerable:l,get:function(){return"LABEL"!==this.nodeName.toUpperCase()?k:this.hasAttribute("for")?
document.getElementById(this.htmlFor):W(this.childNodes,W.g)}}));"reversed"in L("ol")||(pa=function(a){var b=a.getAttribute("reversed"),c,d;"on"===a.getAttribute("data-reversed-p__UUID__")!==(b!==p)&&(c=a.children,d=a.getAttribute("start"),d!==p&&(d=+d,isNaN(d)&&(d=p)),b!==p?(a.setAttribute("data-reversed-p__UUID__","on"),d===p&&(d=c.length),z.call(c,function(a){a.value=d--})):(a.removeAttribute("data-reversed-p__UUID__"),c[0]&&(c[0].value=d||0),z.call(c,function(a){a.removeAttribute("value")})))},
Object.defineProperty((d=f.HTMLOListElement)&&d.prototype||g,"reversed",{get:function(){return"OL"!==(this.nodeName||"").toUpperCase()?k:this.getAttribute("reversed")!==p},set:function(a){if("OL"===(this.nodeName||"").toUpperCase())return this[(a?"set":"remove")+"Attribute"]("reversed",""),pa(this),a}}),document.addEventListener&&(X=function(){document.removeEventListener("DOMContentLoaded",X,r);X=p;z.call(document.getElementsByTagName("ol"),pa)},"complete"==document.readyState?X():document.addEventListener("DOMContentLoaded",
X,r)));z.call([(d=f.HTMLAllCollection)&&d.prototype,(d=f.HTMLCollection)&&d.prototype,(d=f.NodeList)&&d.prototype,document.getElementsByClassName&&document.getElementsByClassName(""),document.querySelectorAll&&document.querySelectorAll("#z"),document.documentElement.children],function(a,b){var c;if(3>b||a&&!("map"in a)&&!Array.isArray(a))(c=3>b?a:a.__proto__||a.constructor&&a.constructor.prototype)&&(c!==t&&c!==K)&&this(c)},z.bind("join forEach every some map filter reduce reduceRight indexOf lastIndexOf slice contains find findIndex splice concat reverse push pop shift unshift sort".split(" "),
function(a,b){var c;a in this||(c={configurable:l,enumerable:r,writable:l},c.value=15>b?t[a]:function(){$("NO_MODIFICATION_ALLOWED_ERR")},Object.defineProperty(this,a,c))}));(d=L("form")).innerHTML="<input type=radio name=t value=1><input type=radio checked name=t value=2>";d.t&&2!==d.t.value&&(d=(d=d.t)&&(d=d.constructor)&&d.prototype||(d=f.NodeList)&&d.prototype)&&d!==Object.prototype&&Object.defineProperty(d,"value",{get:function(){var a=this.length,b;if(a&&(b=this[0])&&"INPUT"===(b.nodeName+"").toUpperCase()&&
"form"in b)for(;b=this[--a];)if(b&&"RADIO"===(b.type+"").toUpperCase()&&b.checked)return b.value},set:function(a){var b=this.length,c;if(b&&(c=this[0])&&"INPUT"===(c.nodeName+"").toUpperCase()&&"form"in c)for(;c=this[--b];)if(c&&"RADIO"===(c.type+"").toUpperCase()&&c.checked)return c.value=a,c.value},configurable:l});if(!n.prototype.toISOString||"1969-12-31T23:59:59.999Z"!==(new n(-1)).toISOString()||E.call((new n(-621987552E5)).toISOString(),"-000001"))n.prototype.toISOString=function(){var a,b,
c,d;if(!f.isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");d=this.getUTCFullYear();a=this.getUTCMonth();d+=~~(a/12);a=[(a%12+12)%12+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()];d=(0>d?"-":9999<d?"+":"")+("00000"+Math.abs(d)).slice(0<=d&&9999>=d?-4:-6);for(b=a.length;b--;)c=a[b],10>c&&(a[b]="0"+c);return d+"-"+a.slice(0,2).join("-")+"T"+a.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"};n.now||
(n.now=function(){return(new n).getTime()});if(!(I=!n.prototype.toJSON))if(!(I=E.call((new n(-621987552E5)).toJSON(),"-000001"))){var ra;a:{try{ra=n.prototype.toJSON.call({toISOString:function(){return-1}});break a}catch(Pa){}ra=k}I=~ra}I&&(n.prototype.toJSON=function(){return C(this.toISOString,this)});A=function(a,b,c,d,f,g,h){var m=arguments.length;return this instanceof n?(m=1==m&&String(a)===a?new n(Date.parse(a)):7<=m?new n(a,b,c,d,f,g,h):6<=m?new n(a,b,c,d,f,g):5<=m?new n(a,b,c,d,f):4<=m?new n(a,
b,c,d):3<=m?new n(a,b,c):2<=m?new n(a,b):1<=m?new n(a):new n,m.constructor=A,m):n.apply(this,arguments)};xa=RegExp("^(\\d{4}|[\\+\\-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$");ya=[0,31,59,90,120,151,181,212,243,273,304,334,365];ga=function(a,b){var c=1<b?1:0;return ya[b]+Math.floor((a-1969+c)/4)-Math.floor((a-1901+c)/100)+Math.floor((a-1601+c)/400)+365*(a-1970)};for(d in n)A[d]=n[d];A.now=n.now;A.UTC=n.UTC;A.prototype=
n.prototype;A.prototype.constructor=A;A.parse=function(a){var b=xa.exec(a);if(b){var c=Number(b[1]),d=Number(b[2]||1)-1,f=Number(b[3]||1)-1,g=Number(b[4]||0),h=Number(b[5]||0),m=Number(b[6]||0),q=Number(b[7]||0),s=!b[4]||b[8]?0:Number(new n(1970,0)),t="-"===b[9]?1:-1,u=Number(b[10]||0),b=Number(b[11]||0);if(g<(0<h||0<m||0<q?24:25)&&60>h&&60>m&&1E3>q&&-1<d&&12>d&&24>u&&60>b&&-1<f&&f<ga(c,d+1)-ga(c,d))if(c=60*(24*(ga(c,d)+f)+g+u*t),c=1E3*(60*(c+h+b*t)+m)+q+s,-864E13<=c&&864E13>=c)return c;return NaN}return n.parse.apply(this,
arguments)};f.Date=A;if(D&&D.ielt9shims)if(z.call(D.ielt9shims,C),D.orig_)f._=D.orig_;else try{delete f._}catch(Qa){}w=d=q=L=t=s=s=J=y=ca=ba=ia=g=A=ja=Z=D=p;x=function(a){throw new TypeError(a);}}.call(window);
</script>
	<script>/*
 * raf.js
 * https://github.com/ngryman/raf.js
 *
 * original requestAnimationFrame polyfill by Erik Möller
 * inspired from paul_irish gist and post
 *
 * Copyright © 2013 ngryman
 * Licensed under the MIT license.
 */

(function(window) {
	var lastTime = 0,
		vendors = ['webkit', 'moz', 'o', 'ms'],
		requestAnimationFrame = window['requestAnimationFrame'],
		cancelAnimationFrame = window['cancelAnimationFrame'],
		i = vendors.length;

	// try to un-prefix existing raf
	while (--i >= 0 && !requestAnimationFrame) {
		requestAnimationFrame = window[vendors[i] + 'RequestAnimationFrame'];
		cancelAnimationFrame = window[vendors[i] + 'CancelAnimationFrame'];
	}

	// polyfill with setTimeout fallback
	// heavily inspired from @darius gist mod: https://gist.github.com/paulirish/1579671#comment-837945
	if (!requestAnimationFrame || !cancelAnimationFrame) {
		requestAnimationFrame = function(callback) {
			var now = Date.now(), nextTime = Math.max(lastTime + 16, now);
			return setTimeout(function() {
				callback(lastTime = nextTime);
			}, nextTime - now);
		};

		cancelAnimationFrame = clearTimeout;
	}

	// export to window
	window['requestAnimationFrame'] = requestAnimationFrame;
	window['cancelAnimationFrame'] = cancelAnimationFrame;
}(window));
</script>
	<script>var msf=function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i,s=n(1);s.version="{{version}}",i=function(){return s}.call(e,n,e,t),!(void 0!==i&&(t.exports=i)),t.exports=s},function(t,e,n){"use strict";var i=n(2),s=(n(9),n(10)),o=n(15),r=null;t.exports.logger=i.logger,t.exports.search=function(t){return r||(r=new o),t&&(r.once("found",function(e){t(null,e)}),setTimeout(function(){r.start()},0)),r},t.exports.local=function(t){s.getLocal(t)},t.exports.remote=function(t,e){s.getByURI(t,e)}},function(t,e,n){t.exports={logger:n(3),url:n(4),inherits:n(6),props:n(7),types:n(8),queryString:n(5)}},function(t,e){"use strict";function n(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t),s.log.apply(s,e)}}for(var i=["error","warn","info","verbose","debug","silly"],s={level:"disabled",log:function(t){if("disabled"!==s.level&&i.indexOf(t)<=i.indexOf(s.level)){var e=Array.prototype.slice.call(arguments,1);e.unshift("[MSF:"+t.toUpperCase()+"]"),console[t]?console[t].apply(console,e):console.log.apply(console,e)}}},o=0;o<i.length;o++){var r=i[o];s[r]=n(r)}t.exports=s},function(t,e,n){"use strict";var i=n(5),s={isValid:function(t){var e=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;return!!t.match(e)},parse:function(t){var e={},n=document.createElement("a");return n.href=t,e.href=n.href,e.protocol=n.protocol,e.hostname=n.hostname,e.port=n.port,e.pathname=n.pathname,e.search=n.search,e.hash=n.hash,e.host=n.host,e.queryString=i.parse(n.search),e}};t.exports=s},function(t,e){"use strict";/*!
	 query-string
	 Parse and stringify URL query strings
	 https://github.com/sindresorhus/query-string
	 by Sindre Sorhus
	 MIT License
	 */
var n={};n.parse=function(t){return"string"!=typeof t?{}:(t=t.trim().replace(/^(\?|#)/,""),t?t.trim().split("&").reduce(function(t,e){var n=e.replace(/\+/g," ").split("="),i=n[0],s=n[1];return i=decodeURIComponent(i),s=void 0===s?null:decodeURIComponent(s),t.hasOwnProperty(i)?Array.isArray(t[i])?t[i].push(s):t[i]=[t[i],s]:t[i]=s,t},{}):{})},n.stringify=function(t){return t?Object.keys(t).map(function(e){var n=t[e];return Array.isArray(n)?n.map(function(t){return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"):encodeURIComponent(e)+"="+encodeURIComponent(n)}).join("&"):""},t.exports=n},function(t,e){"use strict";"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){"use strict";function n(t,e,n,i){return{enumerable:t,configurable:e,writable:n,value:i}}t.exports={readOnly:function(t,e){Array.isArray(e)?e.forEach(function(e){Object.defineProperty(t,e,n(!0,!0,!1,t[e]))}):Object.defineProperty(t,e,n(!0,!0,!1,t[e]))},private:function(t,e){Array.isArray(e)?e.forEach(function(e){Object.defineProperty(t,e,n(!1,!0,!0,t[e]))}):Object.defineProperty(t,e,n(!1,!0,!0,t[e]))}}},function(t,e){"use strict";t.exports={isString:function(t){return"string"==typeof t},isNull:function(t){return null===t},isBoolean:function(t){return"boolean"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:function(t){return t===Object(t)},isArray:function(t){return t.constructor===Array},isFunction:function(t){return"function"==typeof t},isUndefined:function(t){return"undefined"==typeof t}}},function(t,e){"use strict";function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function s(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function r(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._disabledEvents={},n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!s(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,s,c,a,l;if(this._events||(this._events={}),this._disabledEvents[t])return!1;if("error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],r(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,c=new Array(s-1),a=1;a<s;a++)c[a-1]=arguments[a];n.apply(this,c)}else if(o(n)){for(s=arguments.length,c=new Array(s-1),a=1;a<s;a++)c[a-1]=arguments[a];for(l=n.slice(),s=l.length,a=0;a<s;a++){var h=l[a].apply(this,c);if("stopEvent"===h)break}}return!0},n.prototype.addListener=function(t,e){var s;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned){var s;s=r(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,s&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=function(t,e){n.prototype.addListener.apply(this,arguments)},n.prototype.once=function(t,e){function n(){this.removeListener(t,n),s||(s=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var s=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,s,r,c;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],r=n.length,s=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(c=r;c-- >0;)if(n[c]===e||n[c].listener&&n[c].listener===e){s=c;break}if(s<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.off=function(t,e){n.prototype.removeListener.apply(this,arguments)},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.disableEvent=function(t){t&&"string"==typeof t&&(this._disabledEvents[t]=!0)},n.prototype.enableEvent=function(t){t&&"string"==typeof t&&delete this._disabledEvents[t]},n.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},function(t,e,n){"use strict";function i(t){this.id=t.id,this.name=t.name,this.version=t.version,this.type=t.type,this.uri=t.uri,this.device=t.device,o.readOnly(this,["id","name","version","type","uri","device"])}var s=n(2),o=s.props,r=n(11),c=n(12);i.prototype.application=function(t,e){return new r(this,t,e)},i.prototype.channel=function(t){return new c(this,t)},i.getLocal=function(t){i.getByURI("http://127.0.0.1:8001/api/v2/",t)},i.getByURI=function(t,e){var n=new XMLHttpRequest;n.timeout=5e3,n.ontimeout=function(){e()},n.onload=function(){if(200===this.status)try{var t=JSON.parse(this.responseText);e(null,new i(t))}catch(t){e(t)}else e()},n.open("get",t,!0),n.send()},t.exports=i},function(t,e,n){"use strict";function i(t,e,n){if(!r.isObject(t))throw new TypeError("service must be of type Service");if(!r.isString(e))throw new TypeError("id must be a valid string");if(!r.isString(n))throw new TypeError("channelId must be a valid string");this.type=e.match(/(file:\/\/|http(s)?:\/\/)/gim)?h:l,i.super_.call(this,t,n),this.id=e,this.service=t,this.on("clientDisconnect",function(t){t.isHost&&this.disconnect()}.bind(this)),this.disableEvent("connect"),c.readOnly(this,"id"),c.private(this,"type","service")}var s=n(2),o=s.logger,r=s.types,c=s.props,a=n(12),l="applications",h="webapplication";s.inherits(i,a),i.prototype.connect=function(t,e){if(!r.isObject(t))throw new TypeError("attributes must be a valid object");if(!r.isFunction(e))throw new TypeError("callback must be a valid function");a.prototype.connect.call(this,t,function(t,n){if(t)return e(t);this.connected=!1;var i=function(){this.connected=!0,e&&(o.debug("application.connect->callback",null,n),e(null,n)),o.debug('application.emit("connect")',n),this.enableEvent("connect"),this.emit("connect",n),this.disableEvent("connect")}.bind(this);this.once("ready",i)}.bind(this))},i.prototype.disconnect=function(t,e){if(r.isFunction(t)&&(e=t,t=!0),r.isUndefined(t)&&(t=!0),t&&this.clients.length<=2){var n=function(t){a.prototype.disconnect.call(this,e)}.bind(this);"webapplication"===this.type?this.invoke("ms.webapplication.stop",{url:this.id},n):this.invoke("ms.application.stop",{id:this.id},n)}else a.prototype.disconnect.call(this,e)},i.prototype.install=function(t){if(this.type===h)return t(new Error("web application cannot be installed"));var e,n=new XMLHttpRequest;n.timeout=1e4,n.ontimeout=function(){e=new Error("Request Timeout"),e.code=408,t(e)},n.onload=function(){200===this.status?t(null,!0):(e=new Error(this.statusText),e.code=this.status,t(e))},n.open("put",this.service.uri+"applications/"+this.id,!0),n.send()},i.prototype.start=function(t){var e,n=new XMLHttpRequest;n.timeout=1e4,n.ontimeout=function(){e=new Error("Request Timeout"),e.code=408,t(e)},n.onload=function(){200===this.status?t(null,!0):(e=new Error(this.statusText),e.code=this.status,t(e))},this.type===h?(n.open("post",this.service.uri+"webapplication/",!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.send(JSON.stringify({url:this.id}))):(n.open("post",this.service.uri+"applications/"+this.id,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.send(JSON.stringify({})))},t.exports=i},function(t,e,n){"use strict";function i(t,e){if(o.debug("new Channel",arguments),!r.isObject(t))throw new TypeError("service must be of type Service");if(!r.isString(e))throw new TypeError("uri must be a valid string");i.super_.call(this);var n=this,a=s.url.parse(t.uri);this.connected=!1,this.clientId=null,this.connection=null,this.securityMode=!1,this.resultHandlers={},this.connectionUrl="ws://"+a.host+a.pathname+"channels/"+e,this.pingTimeout=null,this.pingInterval=null,this.clients=new h(this),Object.defineProperty(this,"isConnected",{get:function(){return n.connected}}),Object.defineProperty(this,"connectionTimeout",{set:function(t){o.debug("updating connection timeout ",t),n.pingTimeout=t>0?t:0,this.isConnected&&n.startHealthCheck()},get:function(){return n.pingTimeout}}),this.on("connect",this.startHealthCheck),this.on("disconnect",this.stopHealthCheck),c.readOnly(this,["clients"]),c.private(this,["connected","clientId","connection","resultHandlers","connectionUrl","connectCallback","pingInterval","pingTimeout","lastPingReceived","securityMode"])}var s=n(2),o=s.logger,r=s.types,c=s.props,a=n(9),l=n(13),h=n(14),u="__ping";s.inherits(i,a),i.prototype.connect=function(t,e){if(o.debug("channel.connect",arguments),this.isConnected)return console.warn("Channel is already connected.");if(r.isFunction(t)&&!e?(e=t,t={}):t=t||{},!r.isObject(t))throw new TypeError("attributes must be a valid object");if(e&&!r.isFunction(e))throw new TypeError("callback must be a valid function");this.connectCallback=e;var n=" ";n=this.securityMode?this.connectionUrl.replace("ws","wss").replace("8001","8002"):this.connectionUrl,n=n+"?"+s.queryString.stringify(t),this.connection&&(this.connection.onopen=null,this.connection.onerror=null,this.connection.onclose=null,this.connection.onmessage=null),this.connection=new WebSocket(n),this.connection.binaryType="arraybuffer",this.connection.onopen=this._onSocketOpen.bind(this),this.connection.onerror=this._onSocketError.bind(this),this.connection.onclose=this._onSocketClose.bind(this),this.connection.onmessage=this._onSocketMessage.bind(this)},i.prototype.setSecurityMode=function(t){this.securityMode=t},i.prototype.disconnect=function(t){o.debug("channel.disconnect",arguments),this.isConnected||console.warn("channel is already disconnected"),this.connection.close();var e=this;setTimeout(function(){t&&t(null,e)},0)},i.prototype.publish=function(t,e,n,i){if(o.silly("channel.publish",arguments),!this.isConnected)return console.warn("Channel is not connected.");if(n=n||"broadcast",e=e||null,!r.isString(t))throw new TypeError("event must be a valid string");if(!r.isString(n)&&!r.isArray(n))throw new TypeError("targets must be a valid string or array");this.invoke("ms.channel.emit",{event:t,data:e,to:n},null,!0,i)},i.packMessage=function(t,e){o.debug("channel.packMessage",arguments);var n=JSON.stringify(t),i=new Blob([n]).size,s=new ArrayBuffer(2),r=new DataView(s);return r.setUint16(0,i),new Blob([s,n,e])},i.unpackMessage=function(t){o.debug("channel.unpackMessage",arguments);for(var e="",n=new DataView(t),i=n.getUint16(0),s=0;s<i;s++)e+=String.fromCharCode(n.getUint8(s+2));var r=t.slice(2+i),c=JSON.parse(e);return{payload:r,message:c}},i.prototype.invoke=function(t,e,n,s,c){if(o.debug("channel.invoke",arguments),!r.isString(t))throw new TypeError("method must be a valid string");e=e||{};var a={method:t,params:e};n&&!s&&(a.id=Date.now(),this.resultHandlers[a.id]=n),a=c?i.packMessage(a,c):JSON.stringify(a),this.connection.send(a)},i.prototype._onConnect=function(t){o.silly("channel._onConnect"),this.connected=!0,this.clientId=t.id,t.clients.forEach(function(t){var e=new l(t.id,t.attributes,t.isHost);this.clients.push(e)},this),this.connectCallback&&(o.debug("channel.connect->callback",this.clients.me),this.connectCallback(null,this.clients.me),this.connectCallback=null),o.debug('channel.emit("connect")',this.clients.me),this.emit("connect",this.clients.me)},i.prototype._onDisconnect=function(t){if(o.silly("channel._onDisconnect"),this.connected){var e=this.clients.me;this.clients.clear(),o.debug('channel.emit("disconnect")',e),this.emit("disconnect",e)}this.connected=!1},i.prototype._onClientConnect=function(t){o.silly("channel._onClientConnect");var e=new l(t.id,t.attributes,t.isHost);this.clients.push(e),o.debug('channel.emit("clientConnect")',e),this.emit("clientConnect",e)},i.prototype._onClientDisconnect=function(t){o.silly("channel._onClientDisconnect");var e=this.clients.getById(t.id);e?this.clients.remove(e):(o.warn("client "+t.id+" could not be found, so it was not removed from the client list"),e=new l(t.id,t.attributes,t.isHost)),o.debug('channel.emit("clientDisconnect")',e),this.emit("clientDisconnect",e)},i.prototype._onReady=function(t){o.debug('channel.emit("ready")'),this.emit("ready")},i.prototype._onUserEvent=function(t){var e=this.clients.getById(t.from),n=t.event,i=t.data,s=t.payload;o.debug('channel.emit("'+n+'")',i,e,s),this.emit(n,i,e,s)},i.prototype._onSocketOpen=function(){o.silly("channel._onSocketOpen");var t={method:"ms.webapplication.start",params:{url:this.id}},e={method:"ms.application.start",params:{id:this.id}};"webapplication"===this.type?this.connection.send(JSON.stringify(t)):this.connection.send(JSON.stringify(e))},i.prototype._onSocketClose=function(){o.silly("channel._onSocketClose"),this._onDisconnect()},i.prototype._onSocketError=function(t){o.silly("channel._onSocketError",t),this.emit("error",new Error("WebSocket error"))},i.prototype._onSocketMessage=function(t){o.silly("channel._onSocketMessage",t);try{if("string"==typeof t.data)t=JSON.parse(t.data);else{var e=i.unpackMessage(t.data);t=e.message,t.payload=e.payload}}catch(e){return void o.warn("unable to parse message",t)}if(t.id&&(t.result||t.error)){if(!this.resultHandlers[t.id])return void o.warn("unable to find result handler for result message ",t);this.resultHandlers[t.id](t.error,t.result)}else if(t.event)switch(t.event){case"ms.channel.connect":this._onConnect(t.data);break;case"ms.channel.clientConnect":this._onClientConnect(t.data);break;case"ms.channel.clientDisconnect":this._onClientDisconnect(t.data);break;case"ms.channel.ready":this._onReady(t.data);break;default:this._onUserEvent(t)}else o.warn("unrecognized message type",t)},i.prototype.startHealthCheck=function(){if(this.stopHealthCheck(),this.pingTimeout>0){var t=null;this.on(u,function(e){t=Date.now(),o.debug("ping trip : ",t-e),o.debug("updated last ping time : ",t)});var e=function(){var e=Date.now();t||(t=e),e-t<this.pingTimeout?(o.debug("sending ping"),this.publish(u,e,this.clients.me.id)):(o.debug("ping timed, out closing connection"),this.stopHealthCheck(),this.connection&&(this.connection.close(),this._onDisconnect()))}.bind(this);this.pingInterval=setInterval(e,this.pingTimeout)}},i.prototype.stopHealthCheck=function(){clearInterval(this.pingInterval),this.removeAllListeners(u)},t.exports=i},function(t,e,n){"use strict";function i(t,e,n,i){if(!o.isString(t))throw new TypeError("id must be a valid string");if(e&&!o.isObject(e))throw new TypeError("attributes must be a valid object");this.id=t,this.attributes=e||{},this.isHost=n,this.connectTime=i||Date.now(),Object.freeze(this.attributes),Object.freeze(this)}var s=n(2),o=s.types;t.exports=i},function(t,e,n){"use strict";function i(t){if(!o.isObject(t))throw new TypeError("channel must be of type Channel");this.channel=t,i.super_.call(this)}var s=n(2),o=s.types;s.inherits(i,Array),Object.defineProperty(i.prototype,"me",{get:function(){return this.getById(this.channel.clientId)}}),i.prototype.clear=function(){this.length=0},i.prototype.remove=function(t){var e=this.indexOf(t);return e!==-1?(this.splice(e,1),t):null},i.prototype.getById=function(t){if(!o.isString(t)&&!o.isNumber(t))throw new TypeError("id must be a valid string or number");for(var e=0;e<this.length;e++)if(this[e].id===t)return this[e];return null},t.exports=i},function(t,e,n){"use strict";function i(){i.super_.call(this),this.discorveryFrame=null,this.status=i.STATUS_STOPPED;var t=this,e=[];window.RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;var n=new window.RTCPeerConnection({iceServers:[]}),s=function(){},o=function(t){function n(t,n){e.push(n)}var i=0,s="",o=t.split(".");for(i=0;i<=255;i++)s=o[0]+"."+o[1]+"."+o[2]+"."+i,window.msf.remote("http://"+s+":8001/api/v2/",n)},r=function(){t.onSearchResult(e)};n.createDataChannel(""),n.createOffer(n.setLocalDescription.bind(n),s),n.onicecandidate=function(t){if(t&&t.candidate&&t.candidate.candidate){var e=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/.exec(t.candidate.candidate)[1];new o(e);setTimeout(function(){r()},3e3),n.onicecandidate=s}}}var s=n(2),o=(s.props,n(9));s.inherits(i,o),i.STATUS_STOPPED="stopped",i.STATUS_STARTED="started",i.prototype.start=function(){if(this.status===i.STATUS_STOPPED){if(this.discoveryFrame)this.discoveryFrame.postMessage({method:"discovery.search"},"*");else{var t=this;this.once("ready",function(){t.discoveryFrame.postMessage({method:"discovery.search"},"*")})}this.onSearchStart()}else console.warn("a previous search is already in progress")},i.prototype.stop=function(){this.onSearchStop()},i.prototype.onSearchReady=function(){this.emit("ready")},i.prototype.onSearchResult=function(t){this.status!==i.STATUS_STOPPED&&this.emit("found",t),this.status=i.STATUS_STOPPED},i.prototype.onSearchError=function(t){this.emit("error",t),this.status=i.STATUS_STOPPED},i.prototype.onSearchStart=function(){this.status=i.STATUS_STARTED,this.emit("start",this)},i.prototype.onSearchStop=function(){this.status=i.STATUS_STOPPED,this.emit("stop",this)},t.exports=i}]);</script>
	</head>
	<body></body>
</html>
